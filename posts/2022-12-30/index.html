<!doctype html><html lang=ja data-figures class=page>
<head>
<title>Neovim の設定集（2022年12月30時点） | 閑古鳥ブログ</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta http-equiv=x-ua-compatible content="IE=edge">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-367F1P4JXZ"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-367F1P4JXZ')</script>
<meta property="og:locale" content="ja">
<meta property="og:type" content="article">
<meta name=description content="目次 前置き アウトラインバッファの作成 2022年1月10日追記 日本語テキストでの移動の効率化 ddu.vim の導入 ddc.vim の導入 lualine.nvim の導入 キーバインド変更 設定ファイ">
<meta name=twitter:card content="summary">
<meta name=twitter:creator content>
<meta name=twitter:title content="Neovim の設定集（2022年12月30時点）">
<meta name=twitter:image content="https://s-show.github.io">
<meta property="og:url" content="https://s-show.github.io/posts/2022-12-30/">
<meta property="og:title" content="Neovim の設定集（2022年12月30時点）">
<meta property="og:description" content="目次 前置き アウトラインバッファの作成 2022年1月10日追記 日本語テキストでの移動の効率化 ddu.vim の導入 ddc.vim の導入 lualine.nvim の導入 キーバインド変更 設定ファイ">
<meta property="og:image" content="https://s-show.github.io">
<meta name=keywords content="clarity,hugo theme,閑古鳥ブログ,3Dプリンタ,キーボード">
<link rel=apple-touch-icon sizes=180x180 href=https://s-show.github.io/icons/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://s-show.github.io/icons/favicon-32x32.png>
<link rel=manifest href=https://s-show.github.io/icons/site.webmanifest>
<link rel=canonical href=https://s-show.github.io/posts/2022-12-30/>
<link rel=preload href=https://s-show.github.io/css/styles.02f94745b7e95b596608d321706e5c4fe0d32dca106f3b9c22fa0a2bfe867fe69d6048d93465d37c2ad1d453bc318dab643350bbd980d86b80f064a6c5945f5d.css integrity="sha512-AvlHRbfpW1lmCNMhcG5cT+DTLcoQbzucIvoKK/6Gf+adYEjZNGXTfCrR1FO8MY2rZDNQu9mA2GuA8GSmxZRfXQ==" as=style crossorigin=anonymous>
<link rel=preload href=https://s-show.github.io/ja/js/bundle.d0b45df9003a90ac496ba5c60bb004ce71c51b977205c5b8bbc612d21311381a8c51acc9308976c39690ce978c106a4752f4381a0cec7bcf64bacc1fae36d306.js as=script integrity="sha512-0LRd+QA6kKxJa6XGC7AEznHFG5dyBcW4u8YS0hMROBqMUazJMIl2w5aQzpeMEGpHUvQ4Ggzse89kuswfrjbTBg==" crossorigin=anonymous>
<link rel=stylesheet type=text/css href=https://s-show.github.io/css/styles.02f94745b7e95b596608d321706e5c4fe0d32dca106f3b9c22fa0a2bfe867fe69d6048d93465d37c2ad1d453bc318dab643350bbd980d86b80f064a6c5945f5d.css integrity="sha512-AvlHRbfpW1lmCNMhcG5cT+DTLcoQbzucIvoKK/6Gf+adYEjZNGXTfCrR1FO8MY2rZDNQu9mA2GuA8GSmxZRfXQ==" crossorigin=anonymous>
</head>
<body data-code=100 data-lines=false id=documentTop data-lang=ja>
<header class=nav_header>
<nav class=nav><a href=https://s-show.github.io class="nav_brand nav_item" title=閑古鳥ブログ>閑古鳥ブログ
<div class=nav_close>
<div><svg class="icon"><title>open-menu</title><use xlink:href="#open-menu"/></svg><svg class="icon"><title>closeme</title><use xlink:href="#closeme"/></svg>
</div>
</div>
</a>
<div class="nav_body nav_body_left">
<div class=nav_parent>
<a href=https://s-show.github.io/about/ class=nav_item title=自己紹介>自己紹介 </a>
</div>
<div class=nav_parent>
<a href=https://s-show.github.io class=nav_item title=blog>blog <img src=https://s-show.github.io/icons/caret-icon.svg alt=icon class=nav_icon></a>
<div class=nav_sub>
<span class=nav_child></span>
<a href=https://s-show.github.io/tags/ class="nav_child nav_item" title=Tags>Tags</a>
</div>
</div>
<div class=follow>
<div class=color_mode>
<input type=checkbox class=color_choice id=mode>
</div>
</div>
</div>
</nav>
</header>
<main>
<div class="grid-inverse wrap content">
<article class=post_content>
<h1 class=post_title>Neovim の設定集（2022年12月30時点）</h1>
<div class=post_meta>
<span><svg class="icon"><title>calendar</title><use xlink:href="#calendar"/></svg>
</span>
<span class=post_date>
2022-12-30</span><span>&nbsp;· <a href=https://s-show.github.io/tags/%E5%82%99%E5%BF%98%E9%8C%B2/ title=備忘録 class="post_tag button button_translucent">備忘録
</a><a href=https://s-show.github.io/tags/neovim/ title=Neovim class="post_tag button button_translucent">Neovim
</a>
</span>
</div>
<div class=post_body><div class=page-toc>
<details>
<summary>目次</summary>
<nav id=TableOfContents>
<ul>
<li><a href=#前置き>前置き</a></li>
<li><a href=#アウトラインバッファの作成>アウトラインバッファの作成</a>
<ul>
<li><a href=#2022年1月10日追記>2022年1月10日追記</a></li>
</ul>
</li>
<li><a href=#日本語テキストでの移動の効率化>日本語テキストでの移動の効率化</a></li>
<li><a href=#dduvim-の導入>ddu.vim の導入</a></li>
<li><a href=#ddcvim-の導入>ddc.vim の導入</a></li>
<li><a href=#lualinenvim-の導入>lualine.nvim の導入</a></li>
<li><a href=#キーバインド変更>キーバインド変更</a></li>
<li><a href=#設定ファイル分割>設定ファイル分割</a></li>
<li><a href=#reviewのシンタックスハイライト>Re:VIEWのシンタックスハイライト</a></li>
<li><a href=#noicenvim-の導入>noice.nvim の導入</a></li>
<li><a href=#導入したものの廃止したもの>導入したものの廃止したもの</a>
<ul>
<li><a href=#fine-cmdlinenvim>fine-cmdline.nvim</a></li>
</ul>
</li>
<li><a href=#参考にしたサイト情報>参考にしたサイト・情報</a></li>
</ul>
</nav>
</details>
</div>
<h2 id=前置き>前置き</h2>
<p>WSL2 + Neovim + VSCode で使っていく予定だったのですが、Neovim をあれこれカスタマイズしていると Neovim が使いやすくなってきてメインエディタになりそうなので、これまでの設定をまとめてみようと思います。</p>
<p>順不同で色々なネタを扱っていて記事が長いですので、上記の目次で必要な個所を拾い読みしてください。</p>
<h2 id=アウトラインバッファの作成>アウトラインバッファの作成</h2>
<div class="alert alert_info">
2022年1月10日追記
</div>
<p>このブログは、Go言語 で書かれた静的サイトジェネレーターの <a href=https://gohugo.io/>The world’s fastest framework for building websites |Hugo</a> で構築しており、記事は Markdown で書いています。また、職場で細々と行っている勉強会の資料は、書籍制作向けのテキストマークアップ言語仕様、およびその変換システムである <a href=https://reviewml.org/>Re:VIEW - Digital Publishing System for Books and eBooks</a> で作成しています。</p>
<p>どちらもそこそこ長い記事を書くことがあるのでアウトライン機能が欲しいのですが、プラグインはできる限り少なくしたいため、プラグイン無しでできるか挑戦したところ上手くいきましたので、方法を紹介します。</p>
<p>処理の大まかな流れは、<code>;o</code> キーをタイプしたらファイルタイプ毎の検索条件を用いて Vimgrep と Quickfix を実行し、その結果をカレントバッファの右半分に表示するというものです。</p>
<p>ただ、Neovim のデフォルトのファイルタイプに Re:VIEW は含まれていませんので、<code>~/.config/nvim/filetype.vim</code> に以下のコードを追加して、Re:VIEW のファイルタイプを登録します。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln>1</span><span class=nx>augroup</span> <span class=nx>filetypedetect</span><span class=err>
</span><span class=ln>2</span><span class=err></span><span class=c>  &#34; 拡張子 .re のファイルを Re:VIEW ファイルと判定</span><span class=err>
</span><span class=ln>3</span><span class=err></span>  <span class=nx>au</span> <span class=nx>BufNewFile</span><span class=p>,</span><span class=nx>BufRead</span> *.<span class=nx>re</span>        <span class=nx>setf</span> <span class=nx>review</span><span class=err>
</span><span class=ln>4</span><span class=err></span><span class=nx>augroup</span> <span class=nx>END</span><span class=err>
</span></code></pre></div><p>それから、Vimgrep と Quickfix を次のとおり組み合わせます。</p>
<ol>
<li>Markdown と Re:VIEW の見出し部分を検索条件に設定した Vimgrep を実行</li>
<li>Vimgrep の結果を <code>copen</code> コマンドで表示</li>
<li><code>wincmd L</code> コマンドで結果を右側に表示</li>
<li>上記の処理を関数にまとめた上で <code>;o</code> キーバインドに割り当て</li>
</ol>
<p>具体的なコードは次のとおりです。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln> 1</span><span class=k>function</span><span class=p>!</span> <span class=nx>CreateOutlineBuffer</span><span class=p>()</span><span class=err>
</span><span class=ln> 2</span><span class=err></span>  <span class=k>if</span> <span class=p>(</span>&amp;<span class=nx>ft</span><span class=p>==</span><span class=s1>&#39;review&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln> 3</span><span class=err></span>    <span class=nx>vimgrep</span> <span class=sr>/^=\+ /</span> %<span class=err>
</span><span class=ln> 4</span><span class=err></span>  <span class=k>elseif</span> <span class=p>(</span>&amp;<span class=nx>ft</span><span class=p>==</span><span class=s1>&#39;markdown&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln> 5</span><span class=err></span>    <span class=nx>vimgrep</span> <span class=sr>/^#\+ /</span> %<span class=err>
</span><span class=ln> 6</span><span class=err></span>  <span class=k>endif</span><span class=err>
</span><span class=ln> 7</span><span class=err></span>  <span class=nx>copen</span><span class=err>
</span><span class=ln> 8</span><span class=err></span>  <span class=nx>wincmd</span> <span class=nx>L</span><span class=err>
</span><span class=ln> 9</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln>10</span><span class=err>
</span><span class=ln>11</span><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> ;<span class=nx>o</span> :<span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>CreateOutlineBuffer</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span></code></pre></div><p>これで <code>;o</code> 次のスクリーンショットのようにアウトラインバッファを作成することができます。</p>
<figure class="figure bsimage">
<img src=outlineBuffer.png class="figure-img img-fluid">
<figcaption class="figure-caption fw-light text-center">アウトラインバッファを表示</figcaption>
</figure>
<p>実際の動作は次の動画のとおりです。</p>
<video class=video-shortcode preload=auto controls>
<source src=runOutlineBuffer.mp4 type=video/webm>
There should have been a video here but your browser does not seem
to support it.
</video>
<div class="alert alert_info">
ちなみに、このアウトラインバッファは、今は開発が終了した Github 製エディタのプラグインの [t9md/atom-narrow: narrow something](https://github.com/t9md/atom-narrow) の見た目を模して設定しました。私はこのプラグインがお気に入りでしたので、見た目だけでも同じようにしたかったものです。
</div>
<h3 id=2022年1月10日追記>2022年1月10日追記</h3>
<p>上記のコードには欠陥があり、次のウィンドウ配置で編集しているときにアウトラインを更新するために <code>;f</code> キーバインドをタイプすると画面配置が変わってしまいます。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=ln>1</span>アウトライン更新前
<span class=ln>2</span>+────────────+────────────+
<span class=ln>3</span>| Window A   | Window B   |
<span class=ln>4</span>| (Doc)      | (Outline)  |
<span class=ln>5</span>|            +────────────+
<span class=ln>6</span>|            | Window C   |
<span class=ln>7</span>|            | (Terminal) |
<span class=ln>8</span>+────────────+────────────+
</code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=ln>1</span>アウトライン更新後
<span class=ln>2</span>+───────+────────+────────+
<span class=ln>3</span>| Win A | Win C  | Win B  |
<span class=ln>4</span>|       |        |        |
<span class=ln>5</span>|       |        |        |
<span class=ln>6</span>|       |        |        |
<span class=ln>7</span>|       |        |        |
<span class=ln>8</span>+───────+────────+────────+
</code></pre></div><p>この問題を解決するため、<code>;f</code> キーバインドをタイプしたときに Quickfix ウィンドウが存在しているか調査し、存在していればその時点のウィンドウ配置をいったん保存してからアウトラインを更新してウィンドウ配置を元に戻す方法に変更しました。</p>
<p>具体的なコードは次のとおりです。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln> 1</span><span class=k>function</span><span class=p>!</span> <span class=nx>CreateOutlineBuffer</span><span class=p>()</span><span class=err>
</span><span class=ln> 2</span><span class=err></span>  <span class=k>let</span> <span class=nx>QuickfixWindowExists</span> <span class=p>=</span> <span class=nx>QuickfixWindowExists</span><span class=p>()</span><span class=err>
</span><span class=ln> 3</span><span class=err></span>  <span class=k>if</span> <span class=nx>QuickfixWindowExists</span> <span class=p>==</span> <span class=s2>&#34;true&#34;</span><span class=err>
</span><span class=ln> 4</span><span class=err></span>    <span class=k>let</span> <span class=nx>windowLayout</span> <span class=p>=</span> <span class=nx>winsaveview</span><span class=p>()</span><span class=err>
</span><span class=ln> 5</span><span class=err></span>    <span class=nx>call</span> <span class=nx>DoVimgrep</span><span class=p>(</span>&amp;<span class=nx>filetype</span><span class=p>)</span><span class=err>
</span><span class=ln> 6</span><span class=err></span>    <span class=nx>copen</span><span class=err>
</span><span class=ln> 7</span><span class=err></span>    <span class=nx>execute</span> <span class=nx>winrestview</span><span class=p>(</span><span class=nx>windowLayout</span><span class=p>)</span><span class=err>
</span><span class=ln> 8</span><span class=err></span>  <span class=k>else</span><span class=err>
</span><span class=ln> 9</span><span class=err></span>    <span class=nx>call</span> <span class=nx>DoVimgrep</span><span class=p>(</span>&amp;<span class=nx>filetype</span><span class=p>)</span><span class=err>
</span><span class=ln>10</span><span class=err></span>    <span class=nx>copen</span><span class=err>
</span><span class=ln>11</span><span class=err></span>    <span class=nx>wincmd</span> <span class=nx>L</span><span class=err>
</span><span class=ln>12</span><span class=err></span>  <span class=k>endif</span><span class=err>
</span><span class=ln>13</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln>14</span><span class=err>
</span><span class=ln>15</span><span class=err></span><span class=k>function</span><span class=p>!</span> <span class=nx>QuickfixWindowExists</span><span class=p>()</span> <span class=nx>abort</span><span class=err>
</span><span class=ln>16</span><span class=err></span>  <span class=k>let</span> <span class=nx>bufferNoList</span> <span class=p>=</span> <span class=nx>tabpagebuflist</span><span class=p>()</span><span class=err>
</span><span class=ln>17</span><span class=err></span>  <span class=nx>for</span> <span class=nx>bufferNo</span> <span class=nx>in</span> <span class=nx>bufferNoList</span><span class=err>
</span><span class=ln>18</span><span class=err></span>    <span class=k>if</span> <span class=nx>getwininfo</span><span class=p>(</span><span class=nx>bufwinid</span><span class=p>(</span><span class=nx>bufferNo</span><span class=p>))</span>[<span class=s1>&#39;variables&#39;</span>][<span class=s1>&#39;quickfix&#39;</span>] <span class=p>==</span> <span class=m>1</span><span class=err>
</span><span class=ln>19</span><span class=err></span>      <span class=nx>return</span> <span class=s2>&#34;true&#34;</span><span class=err>
</span><span class=ln>20</span><span class=err></span>    <span class=k>endif</span><span class=err>
</span><span class=ln>21</span><span class=err></span>  <span class=nx>endfor</span><span class=err>
</span><span class=ln>22</span><span class=err></span>  <span class=nx>return</span> <span class=s2>&#34;false&#34;</span><span class=err>
</span><span class=ln>23</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln>24</span><span class=err>
</span><span class=ln>25</span><span class=err></span><span class=k>function</span><span class=p>!</span> <span class=nx>DoVimgrep</span><span class=p>(</span><span class=nx>filetype</span><span class=p>)</span> <span class=nx>abort</span><span class=err>
</span><span class=ln>26</span><span class=err></span>  <span class=k>if</span> <span class=p>(</span><span class=nx>a</span>:<span class=nx>filetype</span><span class=p>==</span><span class=s1>&#39;review&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln>27</span><span class=err></span>    <span class=nx>vimgrep</span> <span class=sr>/^=\+ /</span> %<span class=err>
</span><span class=ln>28</span><span class=err></span>  <span class=k>elseif</span> <span class=p>(</span><span class=nx>a</span>:<span class=nx>filetype</span><span class=p>==</span><span class=s1>&#39;markdown&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln>29</span><span class=err></span>    <span class=nx>vimgrep</span> <span class=sr>/^#\+ /</span> %<span class=err>
</span><span class=ln>30</span><span class=err></span>  <span class=k>endif</span><span class=err>
</span><span class=ln>31</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln>32</span><span class=err>
</span><span class=ln>33</span><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> ;<span class=nx>o</span> :<span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>CreateOutlineBuffer</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span></code></pre></div><p>Quickfix ウィンドウの存在確認は <code>QuickfixWindowExists()</code> 関数で行っています。</p>
<p>まず、<code>tabpagebuflist()</code> 関数で編集中のタブにあるバッファの番号リストを取得します。そうしたら、その番号リストを <code>for</code> 文で順番に <code>bufwinid()</code> 関数に渡してウィンドウID を取得し、その ID を <code>getwininfo()</code> 関数に渡してウィンドウ情報を辞書のリストとして取得します。ウィンドウ情報にはそのウィンドウが Quickfix/Location ウィンドウかどうかを示す項目がありますので、その項目を <code>if</code> 文の条件に用いています。Quickfix ウィンドウは1つしか開くことができませんので、Quickfix ウィンドウが1つ見つかった時点で <code>"true"</code> を返して関数を終了します。</p>
<p>あとは、<code>QuickfixWindowExists()</code> 関数の返り値が <code>"true"</code> なら Quickfix ウィンドウが存在するので <code>winsaveview()</code> 関数を実行してウィンドウ配置の情報を取得して変数に格納します。それからアウトライン表示の <code>DoVimgrep()</code> 関数を実行してアウトラインを更新し、Ex コマンドの <code>winrestview</code> に先ほど格納したウィンドウ配置の情報を渡してウィンドウ配置を復元します。</p>
<p>なお、<code>cbuffer</code> コマンドを実行してアウトラインを更新する方法も試しましたが、行頭に <code>||</code> が追加されて Enter キーを押しても該当箇所にジャンプできなくなる症状を解消できなかったため、断念して上記の方法に切り替えました。</p>
<h2 id=日本語テキストでの移動の効率化>日本語テキストでの移動の効率化</h2>
<p>Vim の <code>f{char}</code> コマンドを日本語で使う場合、<code>f</code> キーをタイプしてから IME をオンにして検索文字を入力する必要があり、非常に面倒くさいです。</p>
<p>そこで、<a href=https://sasasa.org/vim/ftjpn/>Vimで日本語編集時の f, t の移動や操作を楽にするプラグイン ftjpn を作りました</a> をインストールして、<code>f,</code> や <code>f.</code> や <code>fg</code> のキーバインドで <code>、</code> や <code>。</code> や <code>が</code> に移動できるようにしました。</p>
<p>ソースコードを編集するときのような細やかな移動はできませんが、<code>、</code> や <code>。</code> や <code>が</code> に移動できるだけでも結構効率は上がりますので、このプラグインは便利なプラグインです。なお、私の設定は次のとおりです。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln> 1</span><span class=k>let</span> <span class=nx>g</span>:<span class=nx>ftjpn_key_list</span> <span class=p>=</span> [<span class=err>
</span><span class=ln> 2</span><span class=err></span>    \ [<span class=s1>&#39;.&#39;</span><span class=p>,</span> <span class=s1>&#39;。&#39;</span><span class=p>,</span> <span class=s1>&#39;．&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 3</span><span class=err></span>    \ [<span class=s1>&#39;,&#39;</span><span class=p>,</span> <span class=s1>&#39;、&#39;</span><span class=p>,</span> <span class=s1>&#39;，&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 4</span><span class=err></span>    \ [<span class=s1>&#39;g&#39;</span><span class=p>,</span> <span class=s1>&#39;が&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 5</span><span class=err></span>    \ [<span class=s1>&#39;w&#39;</span><span class=p>,</span> <span class=s1>&#39;を&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 6</span><span class=err></span>    \ [<span class=s1>&#39;h&#39;</span><span class=p>,</span> <span class=s1>&#39;は&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 7</span><span class=err></span>    \ [<span class=s1>&#39;(&#39;</span><span class=p>,</span> <span class=s1>&#39;（&#39;</span><span class=p>,</span> <span class=s1>&#39;）&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 8</span><span class=err></span>    \ [<span class=s1>&#39;;&#39;</span><span class=p>,</span> <span class=s1>&#39;！&#39;</span><span class=p>,</span> <span class=s1>&#39;？&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 9</span><span class=err></span>    \ [<span class=s1>&#39;[&#39;</span><span class=p>,</span> <span class=s1>&#39;「&#39;</span><span class=p>,</span> <span class=s1>&#39;『&#39;</span><span class=p>,</span> <span class=s1>&#39;【&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>10</span><span class=err></span>    \ [<span class=s1>&#39;]&#39;</span><span class=p>,</span> <span class=s1>&#39;」&#39;</span><span class=p>,</span> <span class=s1>&#39;』&#39;</span><span class=p>,</span> <span class=s1>&#39;】&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>11</span><span class=err></span>    \ ]<span class=err>
</span></code></pre></div><p>なお、このプラグインを使い始めた当初、<code>,</code> や <code>.</code> は使えるのに <code>g</code> や <code>h</code> が使えなくて困っていましたが、作者に<a href=https://github.com/juro106/ftjpn/issues/1>相談</a>して無事に使えるようになりました。あらためて御礼申し上げます。</p>
<h2 id=dduvim-の導入>ddu.vim の導入</h2>
<p>エディタ内蔵のファイラーがあると便利なので色々探したのですが、Vim 標準の Netrw は操作性が独特だったりサイドバーの幅の調整が難しかったりとイマイチ合わなかったので、思い切って <a href=https://zenn.dev/shougo/articles/ddu-ui-filer>新世代のファイラー UI ddu-ui-filer</a> を導入しました。</p>
<p>最初は設定方法などがさっぱり分からず悪戦苦闘の連続でしたが、何とか使えるようになるととても便利で、手放せないプラグインになりそうです。</p>
<p>現在はファイラーに加えて、バッファリストとコマンド履歴の絞り込み＆選択にも使っています。特に、バッファリストの選択は便利な機能で、ターミナルで <code>nvim **.vim</code> や <code>nvim **.re</code> と入力して設定ファイルや Re:VIEW ファイルを一括して開いてバッファリストに読み込み、そのリストを <code>;b</code> キーバインドで呼び出してサクサク切り替えています。ついでに、リストから開くときに <code>Enter</code> だとカレントバッファに読み込み、<code>vo</code> でウィンドウを縦分割して読み込み、<code>vs</code> でウィンドウを水平分割して読み込むように設定しています。ただし、ここまで来るには悪戦苦闘の連続でした。</p>
<p>実際の設定とその解説を書けば他の人の役に立つと思うのですが、記事が一本書けそうな気がしますので、設定の解説は別の記事にします。そのため、ここでは実際の設定のみ掲載します。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln>  1</span><span class=k>let</span> <span class=nx>g</span>:<span class=nx>denops</span>#<span class=nx>deno</span> <span class=p>=</span> <span class=s1>&#39;/home/s-show/.deno/bin/deno&#39;</span><span class=err>
</span><span class=ln>  2</span><span class=err>
</span><span class=ln>  3</span><span class=err></span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>custom</span>#<span class=nx>patch_global</span><span class=p>(</span>{<span class=err>
</span><span class=ln>  4</span><span class=err></span>\   <span class=s1>&#39;ui&#39;</span>: <span class=s1>&#39;filer&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>  5</span><span class=err></span>\   <span class=s1>&#39;sources&#39;</span>: [<span class=err>
</span><span class=ln>  6</span><span class=err></span>\     {<span class=err>
</span><span class=ln>  7</span><span class=err></span>\       <span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;file&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>  8</span><span class=err></span>\       <span class=s1>&#39;params&#39;</span>: {}<span class=p>,</span><span class=err>
</span><span class=ln>  9</span><span class=err></span>\     }<span class=p>,</span><span class=err>
</span><span class=ln> 10</span><span class=err></span>\   ]<span class=p>,</span><span class=err>
</span><span class=ln> 11</span><span class=err></span>\   <span class=s1>&#39;sourceOptions&#39;</span>: {<span class=err>
</span><span class=ln> 12</span><span class=err></span>\     <span class=s1>&#39;_&#39;</span>: {<span class=err>
</span><span class=ln> 13</span><span class=err></span>\       <span class=s1>&#39;columns&#39;</span>: [<span class=s1>&#39;filename&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 14</span><span class=err></span>\     }<span class=p>,</span><span class=err>
</span><span class=ln> 15</span><span class=err></span>\     <span class=s1>&#39;command_history&#39;</span>: {<span class=err>
</span><span class=ln> 16</span><span class=err></span>\       <span class=s1>&#39;matchers&#39;</span>: [ <span class=s1>&#39;matcher_substring&#39;</span> ]<span class=p>,</span><span class=err>
</span><span class=ln> 17</span><span class=err></span>\     }<span class=p>,</span><span class=err>
</span><span class=ln> 18</span><span class=err></span>\     <span class=s1>&#39;buffer&#39;</span>: {<span class=err>
</span><span class=ln> 19</span><span class=err></span>\       <span class=s1>&#39;matchers&#39;</span>: [ <span class=s1>&#39;matcher_substring&#39;</span> ]<span class=p>,</span><span class=err>
</span><span class=ln> 20</span><span class=err></span>\     }<span class=p>,</span><span class=err>
</span><span class=ln> 21</span><span class=err></span>\   }<span class=p>,</span><span class=err>
</span><span class=ln> 22</span><span class=err></span>\   <span class=s1>&#39;kindOptions&#39;</span>: {<span class=err>
</span><span class=ln> 23</span><span class=err></span>\     <span class=s1>&#39;file&#39;</span>: {<span class=err>
</span><span class=ln> 24</span><span class=err></span>\       <span class=s1>&#39;defaultAction&#39;</span>: <span class=s1>&#39;open&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln> 25</span><span class=err></span>\     }<span class=p>,</span><span class=err>
</span><span class=ln> 26</span><span class=err></span>\     <span class=s1>&#39;command_history&#39;</span>: {<span class=err>
</span><span class=ln> 27</span><span class=err></span>\       <span class=s1>&#39;defaultAction&#39;</span>: <span class=s1>&#39;execute&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln> 28</span><span class=err></span>\     }<span class=p>,</span><span class=err>
</span><span class=ln> 29</span><span class=err></span>\   }<span class=p>,</span><span class=err>
</span><span class=ln> 30</span><span class=err></span>\   <span class=s1>&#39;uiParams&#39;</span>: {<span class=err>
</span><span class=ln> 31</span><span class=err></span>\     <span class=s1>&#39;filer&#39;</span>: {<span class=err>
</span><span class=ln> 32</span><span class=err></span>\       <span class=s1>&#39;sort&#39;</span>: <span class=s1>&#39;filename&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln> 33</span><span class=err></span>\       <span class=s1>&#39;split&#39;</span>: <span class=s1>&#39;floating&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln> 34</span><span class=err></span>\       <span class=s1>&#39;displayTree&#39;</span>: <span class=nx>v</span>:<span class=nx>true</span><span class=p>,</span><span class=err>
</span><span class=ln> 35</span><span class=err></span>\       <span class=s1>&#39;previewVertical&#39;</span>: <span class=nx>v</span>:<span class=nx>true</span><span class=p>,</span><span class=err>
</span><span class=ln> 36</span><span class=err></span>\       <span class=s1>&#39;previewWidth&#39;</span>: <span class=m>80</span><span class=p>,</span><span class=err>
</span><span class=ln> 37</span><span class=err></span>\     }<span class=err>
</span><span class=ln> 38</span><span class=err></span>\   }<span class=p>,</span><span class=err>
</span><span class=ln> 39</span><span class=err></span>\ }<span class=p>)</span><span class=err>
</span><span class=ln> 40</span><span class=err>
</span><span class=ln> 41</span><span class=err></span><span class=nx>autocmd</span> <span class=nx>FileType</span> <span class=nx>ddu</span><span class=p>-</span><span class=nx>ff</span> <span class=nx>call</span> <span class=nx>s</span>:<span class=nx>ddu_my_settings</span><span class=p>()</span><span class=err>
</span><span class=ln> 42</span><span class=err></span><span class=k>function</span><span class=p>!</span> <span class=nx>s</span>:<span class=nx>ddu_my_settings</span><span class=p>()</span> <span class=nx>abort</span><span class=err>
</span><span class=ln> 43</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 44</span><span class=err></span>        \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>ff</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 45</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>vo</span><span class=err>
</span><span class=ln> 46</span><span class=err></span>        \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>ff</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;open&#39;</span><span class=p>,</span> <span class=s1>&#39;params&#39;</span>: {<span class=s1>&#39;command&#39;</span>: <span class=s1>&#39;vsplit&#39;</span>}}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 47</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>vs</span><span class=err>
</span><span class=ln> 48</span><span class=err></span>        \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>ff</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;open&#39;</span><span class=p>,</span> <span class=s1>&#39;params&#39;</span>: {<span class=s1>&#39;command&#39;</span>: <span class=s1>&#39;split&#39;</span>}}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 49</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Space</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 50</span><span class=err></span>        \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>ff</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;toggleSelectItem&#39;</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 51</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>i</span><span class=err>
</span><span class=ln> 52</span><span class=err></span>        \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>ff</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;openFilterWindow&#39;</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 53</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>q</span><span class=err>
</span><span class=ln> 54</span><span class=err></span>        \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>ff</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;quit&#39;</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 55</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln> 56</span><span class=err>
</span><span class=ln> 57</span><span class=err></span><span class=nx>autocmd</span> <span class=nx>FileType</span> <span class=nx>ddu</span><span class=p>-</span><span class=nx>ff</span><span class=p>-</span><span class=nx>filter</span> <span class=nx>call</span> <span class=nx>s</span>:<span class=nx>ddu_filter_my_settings</span><span class=p>()</span><span class=err>
</span><span class=ln> 58</span><span class=err></span><span class=k>function</span><span class=p>!</span> <span class=nx>s</span>:<span class=nx>ddu_filter_my_settings</span><span class=p>()</span> <span class=nx>abort</span><span class=err>
</span><span class=ln> 59</span><span class=err></span>  <span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 60</span><span class=err></span>  \ <span class=p>&lt;</span><span class=nx>Esc</span><span class=p>&gt;&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>close</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 61</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 62</span><span class=err></span>  \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>close</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 63</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>q</span><span class=err>
</span><span class=ln> 64</span><span class=err></span>  \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>close</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 65</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln> 66</span><span class=err>
</span><span class=ln> 67</span><span class=err></span><span class=nx>autocmd</span> <span class=nx>FileType</span> <span class=nx>ddu</span><span class=p>-</span><span class=nx>filer</span> <span class=nx>call</span> <span class=nx>s</span>:<span class=nx>ddu_filer_my_settings</span><span class=p>()</span><span class=err>
</span><span class=ln> 68</span><span class=err></span><span class=k>function</span><span class=p>!</span> <span class=nx>s</span>:<span class=nx>ddu_filer_my_settings</span><span class=p>()</span> <span class=nx>abort</span><span class=err>
</span><span class=ln> 69</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 70</span><span class=err></span>    \ <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>is_tree</span><span class=p>()</span> ?<span class=err>
</span><span class=ln> 71</span><span class=err></span>    \ <span class=s2>&#34;&lt;Cmd&gt;call ddu#ui#filer#do_action(&#39;itemAction&#39;, {&#39;name&#39;: &#39;narrow&#39;})&lt;CR&gt;&#34;</span> :<span class=err>
</span><span class=ln> 72</span><span class=err></span>    \ <span class=s2>&#34;&lt;Cmd&gt;call ddu#ui#filer#do_action(&#39;itemAction&#39;)&lt;CR&gt;&#34;</span><span class=err>
</span><span class=ln> 73</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=nx>vo</span><span class=err>
</span><span class=ln> 74</span><span class=err></span>    \ <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>is_tree</span><span class=p>()</span> ?<span class=err>
</span><span class=ln> 75</span><span class=err></span>    \ <span class=s2>&#34;&lt;Cmd&gt;call ddu#ui#filer#do_action(&#39;itemAction&#39;, {&#39;name&#39;: &#39;narrow&#39;})&lt;CR&gt;&#34;</span> :<span class=err>
</span><span class=ln> 76</span><span class=err></span>    \ <span class=s2>&#34;&lt;Cmd&gt;call ddu#ui#filer#do_action(&#39;itemAction&#39;, {&#39;name&#39;: &#39;open&#39;, &#39;params&#39;: {&#39;command&#39;: &#39;vsplit&#39;}})&lt;CR&gt;&#34;</span><span class=err>
</span><span class=ln> 77</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Space</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 78</span><span class=err></span>        \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;toggleSelectItem&#39;</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 79</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Esc</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 80</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;quit&#39;</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 81</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>o</span><span class=err>
</span><span class=ln> 82</span><span class=err></span>        \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;expandItem&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln> 83</span><span class=err></span>        \ {<span class=s1>&#39;mode&#39;</span>: <span class=s1>&#39;toggle&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 84</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>q</span><span class=err>
</span><span class=ln> 85</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;quit&#39;</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 86</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> ..<span class=err>
</span><span class=ln> 87</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;narrow&#39;</span><span class=p>,</span> <span class=s1>&#39;params&#39;</span>: {<span class=s1>&#39;path&#39;</span>: <span class=s1>&#39;..&#39;</span>}}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 88</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>c</span><span class=err>
</span><span class=ln> 89</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;copy&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 90</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>p</span><span class=err>
</span><span class=ln> 91</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;paste&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 92</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>d</span><span class=err>
</span><span class=ln> 93</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;delete&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 94</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>r</span><span class=err>
</span><span class=ln> 95</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;rename&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 96</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>mv</span><span class=err>
</span><span class=ln> 97</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;move&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 98</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>t</span><span class=err>
</span><span class=ln> 99</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;newFile&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>100</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>mk</span><span class=err>
</span><span class=ln>101</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;newDirectory&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>102</span><span class=err></span>  <span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>yy</span><span class=err>
</span><span class=ln>103</span><span class=err></span>    \ <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>ui</span>#<span class=nx>filer</span>#<span class=nx>do_action</span><span class=p>(</span><span class=s1>&#39;itemAction&#39;</span><span class=p>,</span> {<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;yank&#39;</span>}<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>104</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln>105</span><span class=err></span><span class=c>
</span><span class=ln>106</span><span class=c>&#34; `;f` でファイルリストを表示する</span><span class=err>
</span><span class=ln>107</span><span class=err></span><span class=nx>nmap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> ;<span class=nx>f</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>start</span><span class=p>(</span>{<span class=err>
</span><span class=ln>108</span><span class=err></span>\   <span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;filer&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>109</span><span class=err></span>\   <span class=s1>&#39;uiParams&#39;</span>: {<span class=err>
</span><span class=ln>110</span><span class=err></span>\     <span class=s1>&#39;filer&#39;</span>: {<span class=err>
</span><span class=ln>111</span><span class=err></span>\       <span class=s1>&#39;search&#39;</span>: <span class=nx>expand</span><span class=p>(</span><span class=s1>&#39;%:p&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln>112</span><span class=err></span>\     }<span class=err>
</span><span class=ln>113</span><span class=err></span>\   }<span class=p>,</span><span class=err>
</span><span class=ln>114</span><span class=err></span>\ }<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>115</span><span class=err></span><span class=c>
</span><span class=ln>116</span><span class=c>&#34; `;b` でバッファリストを表示する</span><span class=err>
</span><span class=ln>117</span><span class=err></span><span class=nx>nmap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> ;<span class=nx>b</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>start</span><span class=p>(</span>{<span class=err>
</span><span class=ln>118</span><span class=err></span>\   <span class=s1>&#39;ui&#39;</span>: <span class=s1>&#39;ff&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>119</span><span class=err></span>\   <span class=s1>&#39;sources&#39;</span>: [{<span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;buffer&#39;</span>}]<span class=p>,</span><span class=err>
</span><span class=ln>120</span><span class=err></span>\   <span class=s1>&#39;uiParams&#39;</span>: {<span class=err>
</span><span class=ln>121</span><span class=err></span>\     <span class=s1>&#39;ff&#39;</span>: {<span class=err>
</span><span class=ln>122</span><span class=err></span>\       <span class=s1>&#39;split&#39;</span>: <span class=s1>&#39;floating&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>123</span><span class=err></span>\     }<span class=err>
</span><span class=ln>124</span><span class=err></span>\   }<span class=p>,</span><span class=err>
</span><span class=ln>125</span><span class=err></span>\ }<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>126</span><span class=err></span><span class=c>
</span><span class=ln>127</span><span class=c>&#34; `;c` でコマンドリストを表示する</span><span class=err>
</span><span class=ln>128</span><span class=err></span><span class=nx>nmap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> ;<span class=nx>c</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>ddu</span>#<span class=nx>start</span><span class=p>(</span>{<span class=err>
</span><span class=ln>129</span><span class=err></span>\   <span class=s1>&#39;ui&#39;</span>: <span class=s1>&#39;ff&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>130</span><span class=err></span>\   <span class=s1>&#39;sources&#39;</span>: [<span class=err>
</span><span class=ln>131</span><span class=err></span>\     {<span class=err>
</span><span class=ln>132</span><span class=err></span>\       <span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;command_history&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>133</span><span class=err></span>\     }<span class=p>,</span><span class=err>
</span><span class=ln>134</span><span class=err></span>\   ]<span class=p>,</span><span class=err>
</span><span class=ln>135</span><span class=err></span>\   <span class=s1>&#39;uiParams&#39;</span>: {<span class=err>
</span><span class=ln>136</span><span class=err></span>\     <span class=s1>&#39;ff&#39;</span>: {<span class=err>
</span><span class=ln>137</span><span class=err></span>\       <span class=s1>&#39;split&#39;</span>: <span class=s1>&#39;floating&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>138</span><span class=err></span>\     }<span class=p>,</span><span class=err>
</span><span class=ln>139</span><span class=err></span>\   }<span class=p>,</span><span class=err>
</span><span class=ln>140</span><span class=err></span>\ }<span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span></code></pre></div><p>ファイルリストなどの実際の表示は次のとおりです。</p>
<p><figure class="figure bsimage">
<img src=dduFiler.png class="figure-img img-fluid">
<figcaption class="figure-caption fw-light text-center">ファイラーを表示</figcaption>
</figure>
<figure class="figure bsimage">
<img src=dduBufferList.png class="figure-img img-fluid">
<figcaption class="figure-caption fw-light text-center">バッファリストを表示</figcaption>
</figure>
<figure class="figure bsimage">
<img src=dduCommandHistoryList.png class="figure-img img-fluid">
<figcaption class="figure-caption fw-light text-center">コマンド履歴を表示</figcaption>
</figure></p>
<h2 id=ddcvim-の導入>ddc.vim の導入</h2>
<p>自動補完機能を強化するため、上記の ddu.vim と同じ方が作成してる自動補完プラグインの <a href=https://zenn.dev/shougo/articles/ddc-vim-beta>新世代の自動補完プラグイン ddc.vim</a> を導入しました。合わせて、自動補完をコマンドラインバッファでも有効にするため、<a href=https://zenn.dev/shougo/articles/ddc-vim-pum-vim>自動補完プラグイン ddc.vim + pum.vim</a> も導入しました。こちらも導入は悪戦苦闘の連続でしたが、何とか自動補完ができるようになりました。</p>
<p>過去に入力したコマンドであれば、上記の ddu.vim のコマンド履歴表示でも対応可能なのですが、新規のコマンドはコマンドラインバッファで入力しないといけないですし、コマンド履歴表示は若干タイムラグがあるので、コマンドラインバッファでの自動補完は便利です。また、通常のファイル編集でも2文字入力すれば補完機能が発動しますので、便利に使っています。ただし、プログラミングで必須の LSP 周りの設定は全くできていないため、次はここに挑戦します。</p>
<p>なお、こちらも ddu.vim と同じく解説を書くと記事が一本書けそうな感じなので、ここでは実際のコードのみ掲載します。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln> 1</span><span class=c>&#34;=======================================================================================</span><span class=err>
</span><span class=ln> 2</span><span class=err></span><span class=c>&#34; ddc.nvim の設定</span><span class=err>
</span><span class=ln> 3</span><span class=err></span><span class=c>&#34;=======================================================================================</span><span class=err>
</span><span class=ln> 4</span><span class=err></span><span class=c>&#34;</span><span class=err>
</span><span class=ln> 5</span><span class=err></span><span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>patch_global</span><span class=p>(</span><span class=s1>&#39;sources&#39;</span><span class=p>,</span> [<span class=s1>&#39;around&#39;</span>]<span class=p>)</span><span class=err>
</span><span class=ln> 6</span><span class=err></span><span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>patch_global</span><span class=p>(</span><span class=s1>&#39;sourceOptions&#39;</span><span class=p>,</span> {<span class=err>
</span><span class=ln> 7</span><span class=err></span>      \ <span class=s1>&#39;_&#39;</span>: {<span class=err>
</span><span class=ln> 8</span><span class=err></span>      \   <span class=s1>&#39;matchers&#39;</span>: [<span class=s1>&#39;matcher_head&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln> 9</span><span class=err></span>      \   <span class=s1>&#39;sorters&#39;</span>: [<span class=s1>&#39;sorter_rank&#39;</span>]<span class=err>
</span><span class=ln>10</span><span class=err></span>      \ }<span class=p>,</span><span class=err>
</span><span class=ln>11</span><span class=err></span>      \ <span class=s1>&#39;around&#39;</span>: {<span class=err>
</span><span class=ln>12</span><span class=err></span>      \   <span class=s1>&#39;mark&#39;</span>: <span class=s1>&#39;around&#39;</span><span class=err>
</span><span class=ln>13</span><span class=err></span>      \ }<span class=p>,</span><span class=err>
</span><span class=ln>14</span><span class=err></span>      \}<span class=p>)</span><span class=err>
</span><span class=ln>15</span><span class=err></span><span class=c>
</span><span class=ln>16</span><span class=c>
</span><span class=ln>17</span><span class=c>&#34;=======================================================================================</span><span class=err>
</span><span class=ln>18</span><span class=err></span><span class=c>&#34; pum.nvim の設定</span><span class=err>
</span><span class=ln>19</span><span class=err></span><span class=c>&#34;=======================================================================================</span><span class=err>
</span><span class=ln>20</span><span class=err></span><span class=c>&#34;</span><span class=err>
</span><span class=ln>21</span><span class=err></span><span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>patch_global</span><span class=p>(</span><span class=s1>&#39;cmdlineSources&#39;</span><span class=p>,</span> {<span class=err>
</span><span class=ln>22</span><span class=err></span>    \ <span class=s1>&#39;:&#39;</span>: [<span class=s1>&#39;cmdline-history&#39;</span><span class=p>,</span> <span class=s1>&#39;cmdline&#39;</span><span class=p>,</span> <span class=s1>&#39;around&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>23</span><span class=err></span>    \ <span class=s1>&#39;@&#39;</span>: [<span class=s1>&#39;cmdline-history&#39;</span><span class=p>,</span> <span class=s1>&#39;input&#39;</span><span class=p>,</span> <span class=s1>&#39;file&#39;</span><span class=p>,</span> <span class=s1>&#39;around&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>24</span><span class=err></span>    \ <span class=s1>&#39;&gt;&#39;</span>: [<span class=s1>&#39;cmdline-history&#39;</span><span class=p>,</span> <span class=s1>&#39;input&#39;</span><span class=p>,</span> <span class=s1>&#39;file&#39;</span><span class=p>,</span> <span class=s1>&#39;around&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>25</span><span class=err></span>    \ <span class=s1>&#39;/&#39;</span>: [<span class=s1>&#39;around&#39;</span><span class=p>,</span> <span class=s1>&#39;line&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>26</span><span class=err></span>    \ <span class=s1>&#39;?&#39;</span>: [<span class=s1>&#39;around&#39;</span><span class=p>,</span> <span class=s1>&#39;line&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>27</span><span class=err></span>    \ <span class=s1>&#39;-&#39;</span>: [<span class=s1>&#39;around&#39;</span><span class=p>,</span> <span class=s1>&#39;line&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>28</span><span class=err></span>    \ <span class=s1>&#39;=&#39;</span>: [<span class=s1>&#39;input&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=ln>29</span><span class=err></span>    \ }<span class=p>)</span><span class=err>
</span><span class=ln>30</span><span class=err>
</span><span class=ln>31</span><span class=err></span><span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>patch_global</span><span class=p>(</span><span class=s1>&#39;ui&#39;</span><span class=p>,</span> <span class=s1>&#39;pum&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln>32</span><span class=err></span><span class=c>&#34;call ddc#custom#patch_global(&#39;completionMenu&#39;, &#39;pum.vim&#39;)</span><span class=err>
</span><span class=ln>33</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>TAB</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>34</span><span class=err></span>      \ <span class=nx>pum</span>#<span class=nx>visible</span><span class=p>()</span> ? <span class=s1>&#39;&lt;Cmd&gt;call pum#map#insert_relative(+1)&lt;CR&gt;&#39;</span> :<span class=err>
</span><span class=ln>35</span><span class=err></span>      \ <span class=p>(</span><span class=nx>col</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>)</span> <span class=p>&lt;=</span> <span class=m>1</span> <span class=p>&lt;</span><span class=nx>Bar</span><span class=p>&gt;&lt;</span><span class=nx>Bar</span><span class=p>&gt;</span> <span class=nx>getline</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>)</span>[<span class=nx>col</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>)</span> <span class=p>-</span> <span class=m>2</span>] <span class=p>=~</span># <span class=s1>&#39;\s&#39;</span><span class=p>)</span> ?<span class=err>
</span><span class=ln>36</span><span class=err></span>      \ <span class=s1>&#39;&lt;TAB&gt;&#39;</span> : <span class=nx>ddc</span>#<span class=nx>manual_complete</span><span class=p>()</span><span class=err>
</span><span class=ln>37</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>S</span><span class=p>-</span><span class=nx>Tab</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>insert_relative</span><span class=p>(</span><span class=m>-1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>38</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>n</span><span class=p>&gt;</span>   <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>select_relative</span><span class=p>(+</span><span class=m>1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>39</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>p</span><span class=p>&gt;</span>   <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>select_relative</span><span class=p>(</span><span class=m>-1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>40</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>y</span><span class=p>&gt;</span>   <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>confirm</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>41</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>e</span><span class=p>&gt;</span>   <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>cancel</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>42</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>PageDown</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>insert_relative_page</span><span class=p>(+</span><span class=m>1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>43</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>PageUp</span><span class=p>&gt;</span>   <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>insert_relative_page</span><span class=p>(</span><span class=m>-1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>44</span><span class=err>
</span><span class=ln>45</span><span class=err></span><span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>patch_global</span><span class=p>(</span><span class=s1>&#39;autoCompleteEvents&#39;</span><span class=p>,</span> [<span class=err>
</span><span class=ln>46</span><span class=err></span>    \ <span class=s1>&#39;InsertEnter&#39;</span><span class=p>,</span> <span class=s1>&#39;TextChangedI&#39;</span><span class=p>,</span> <span class=s1>&#39;TextChangedP&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>47</span><span class=err></span>    \ <span class=s1>&#39;CmdlineEnter&#39;</span><span class=p>,</span> <span class=s1>&#39;CmdlineChanged&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>48</span><span class=err></span>    \ ]<span class=p>)</span><span class=err>
</span><span class=ln>49</span><span class=err>
</span><span class=ln>50</span><span class=err></span><span class=nx>nnoremap</span> :  <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>CommandlinePre</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;</span>:<span class=err>
</span><span class=ln>51</span><span class=err></span><span class=nx>nnoremap</span> ;; <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>CommandlinePre</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;</span>:<span class=err>
</span><span class=ln>52</span><span class=err>
</span><span class=ln>53</span><span class=err></span><span class=k>function</span><span class=p>!</span> <span class=nx>CommandlinePre</span><span class=p>()</span> <span class=nx>abort</span><span class=err>
</span><span class=ln>54</span><span class=err></span><span class=c>  &#34; Note: It disables default command line completion!</span><span class=err>
</span><span class=ln>55</span><span class=err></span>  <span class=nx>cnoremap</span> <span class=p>&lt;</span><span class=nx>Tab</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>insert_relative</span><span class=p>(+</span><span class=m>1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>56</span><span class=err></span>  <span class=nx>cnoremap</span> <span class=p>&lt;</span><span class=nx>S</span><span class=p>-</span><span class=nx>Tab</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>insert_relative</span><span class=p>(</span><span class=m>-1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>57</span><span class=err></span>  <span class=nx>cnoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>n</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>insert_relative</span><span class=p>(+</span><span class=m>1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>58</span><span class=err></span>  <span class=nx>cnoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>p</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>insert_relative</span><span class=p>(</span><span class=m>-1</span><span class=p>)&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>59</span><span class=err></span>  <span class=nx>cnoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>y</span><span class=p>&gt;</span>   <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>confirm</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>60</span><span class=err></span>  <span class=nx>cnoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>e</span><span class=p>&gt;</span>   <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>call</span> <span class=nx>pum</span>#<span class=nx>map</span>#<span class=nx>cancel</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>61</span><span class=err></span><span class=c>
</span><span class=ln>62</span><span class=c>  &#34; Overwrite sources</span><span class=err>
</span><span class=ln>63</span><span class=err></span>  <span class=k>if</span> <span class=p>!</span><span class=nx>exists</span><span class=p>(</span><span class=s1>&#39;b:prev_buffer_config&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln>64</span><span class=err></span>    <span class=k>let</span> <span class=nx>b</span>:<span class=nx>prev_buffer_config</span> <span class=p>=</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>get_buffer</span><span class=p>()</span><span class=err>
</span><span class=ln>65</span><span class=err></span>  <span class=k>endif</span><span class=err>
</span><span class=ln>66</span><span class=err></span>  <span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>patch_buffer</span><span class=p>(</span><span class=s1>&#39;cmdlinesources&#39;</span><span class=p>,</span><span class=err>
</span><span class=ln>67</span><span class=err></span>          \ [<span class=s1>&#39;neovim&#39;</span><span class=p>,</span> <span class=s1>&#39;around&#39;</span>]<span class=p>)</span><span class=err>
</span><span class=ln>68</span><span class=err>
</span><span class=ln>69</span><span class=err></span>  <span class=nx>autocmd</span> <span class=nx>User</span> <span class=nx>DDCCmdlineLeave</span> <span class=p>++</span><span class=nx>once</span> <span class=nx>call</span> <span class=nx>CommandlinePost</span><span class=p>()</span><span class=err>
</span><span class=ln>70</span><span class=err></span>  <span class=nx>autocmd</span> <span class=nx>InsertEnter</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>++</span><span class=nx>once</span> <span class=nx>call</span> <span class=nx>CommandlinePost</span><span class=p>()</span><span class=err>
</span><span class=ln>71</span><span class=err></span><span class=c>
</span><span class=ln>72</span><span class=c>  &#34; Enable command line completion</span><span class=err>
</span><span class=ln>73</span><span class=err></span>  <span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>enable_cmdline_completion</span><span class=p>()</span><span class=err>
</span><span class=ln>74</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln>75</span><span class=err>
</span><span class=ln>76</span><span class=err></span><span class=k>function</span><span class=p>!</span> <span class=nx>CommandlinePost</span><span class=p>()</span> <span class=nx>abort</span><span class=err>
</span><span class=ln>77</span><span class=err></span>  <span class=nx>silent</span><span class=p>!</span> <span class=nx>cunmap</span> <span class=p>&lt;</span><span class=nx>Tab</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>78</span><span class=err></span>  <span class=nx>silent</span><span class=p>!</span> <span class=nx>cunmap</span> <span class=p>&lt;</span><span class=nx>S</span><span class=p>-</span><span class=nx>Tab</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>79</span><span class=err></span>  <span class=nx>silent</span><span class=p>!</span> <span class=nx>cunmap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>n</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>80</span><span class=err></span>  <span class=nx>silent</span><span class=p>!</span> <span class=nx>cunmap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>p</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>81</span><span class=err></span>  <span class=nx>silent</span><span class=p>!</span> <span class=nx>cunmap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>y</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>82</span><span class=err></span>  <span class=nx>silent</span><span class=p>!</span> <span class=nx>cunmap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>e</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>83</span><span class=err></span><span class=c>
</span><span class=ln>84</span><span class=c>  &#34; Restore sources</span><span class=err>
</span><span class=ln>85</span><span class=err></span>  <span class=k>if</span> <span class=nx>exists</span><span class=p>(</span><span class=s1>&#39;b:prev_buffer_config&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln>86</span><span class=err></span>    <span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>set_buffer</span><span class=p>(</span><span class=nx>b</span>:<span class=nx>prev_buffer_config</span><span class=p>)</span><span class=err>
</span><span class=ln>87</span><span class=err></span>    <span class=nx>unlet</span> <span class=nx>b</span>:<span class=nx>prev_buffer_config</span><span class=err>
</span><span class=ln>88</span><span class=err></span>  <span class=k>else</span><span class=err>
</span><span class=ln>89</span><span class=err></span>    <span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>custom</span>#<span class=nx>set_buffer</span><span class=p>(</span>{}<span class=p>)</span><span class=err>
</span><span class=ln>90</span><span class=err></span>  <span class=k>endif</span><span class=err>
</span><span class=ln>91</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln>92</span><span class=err>
</span><span class=ln>93</span><span class=err></span><span class=nx>call</span> <span class=nx>ddc</span>#<span class=nx>enable</span><span class=p>()</span><span class=err>
</span></code></pre></div><p>実際の自動補完の様子は次のとおりです。</p>
<p><figure class="figure bsimage">
<img src=ddcCommandLine.png class="figure-img img-fluid">
<figcaption class="figure-caption fw-light text-center">コマンドラインバッファでの補完表示</figcaption>
</figure>
<figure class="figure bsimage">
<img src=ddcInputMode.png class="figure-img img-fluid">
<figcaption class="figure-caption fw-light text-center">インプットモードでの補完表示</figcaption>
</figure></p>
<h2 id=lualinenvim-の導入>lualine.nvim の導入</h2>
<p>ステータスバーにもっと多くの情報を表示するため、<a href=https://github.com/nvim-lualine/lualine.nvim>nvim-lualine/lualine.nvim: A blazing fast and easy to configure neovim statusline plugin written in pure lua.</a> を導入しました。</p>
<p>設定は公式リポジトリの「Default configuration」とほぼ同じですが、右側の表示のセパレータを <code></code> から <code>|</code> に変更し、また、ファイル名の表示をフルパス表示に変更しています。</p>
<p>IMEの状態を右側に表示しようとしましたが、カーソルを上下移動するたびに画面がちらつくうえ、動作が明らかに重くなったため断念しました。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=ln> 1</span><span class=n>lua</span> <span class=o>&lt;&lt;</span> <span class=n>END</span>
<span class=ln> 2</span>  <span class=n>require</span><span class=p>(</span><span class=s1>&#39;lualine&#39;</span><span class=p>).</span><span class=n>setup</span> <span class=p>{</span>
<span class=ln> 3</span>    <span class=n>options</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln> 4</span>      <span class=n>icons_enabled</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
<span class=ln> 5</span>      <span class=n>theme</span> <span class=o>=</span> <span class=s1>&#39;nord&#39;</span><span class=p>,</span>
<span class=ln> 6</span>      <span class=n>component_separators</span> <span class=o>=</span> <span class=p>{</span> <span class=n>left</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>right</span> <span class=o>=</span> <span class=s1>&#39;|&#39;</span><span class=p>},</span>
<span class=ln> 7</span>      <span class=n>section_separators</span> <span class=o>=</span> <span class=p>{</span> <span class=n>left</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>right</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>},</span>
<span class=ln> 8</span>      <span class=n>disabled_filetypes</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln> 9</span>        <span class=n>statusline</span> <span class=o>=</span> <span class=p>{},</span>
<span class=ln>10</span>        <span class=n>winbar</span> <span class=o>=</span> <span class=p>{},</span>
<span class=ln>11</span>      <span class=p>},</span>
<span class=ln>12</span>      <span class=n>ignore_focus</span> <span class=o>=</span> <span class=p>{},</span>
<span class=ln>13</span>      <span class=n>always_divide_middle</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
<span class=ln>14</span>      <span class=n>globalstatus</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
<span class=ln>15</span>      <span class=n>refresh</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>16</span>        <span class=n>statusline</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>,</span>
<span class=ln>17</span>        <span class=n>tabline</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>,</span>
<span class=ln>18</span>        <span class=n>winbar</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>,</span>
<span class=ln>19</span>      <span class=p>}</span>
<span class=ln>20</span>    <span class=p>},</span>
<span class=ln>21</span>    <span class=n>sections</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>22</span>      <span class=n>lualine_a</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;mode&#39;</span><span class=p>},</span>
<span class=ln>23</span>      <span class=n>lualine_b</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;branch&#39;</span><span class=p>,</span> <span class=s1>&#39;diff&#39;</span><span class=p>,</span> <span class=s1>&#39;diagnostics&#39;</span><span class=p>},</span>
<span class=ln>24</span>      <span class=n>lualine_c</span> <span class=o>=</span> <span class=p>{{</span> <span class=s1>&#39;filename&#39;</span><span class=p>,</span> <span class=n>file_status</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span> <span class=n>path</span> <span class=o>=</span> <span class=mi>3</span> <span class=p>}},</span>
<span class=ln>25</span>      <span class=n>lualine_x</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;encoding&#39;</span><span class=p>,</span> <span class=s1>&#39;fileformat&#39;</span><span class=p>,</span> <span class=s1>&#39;filetype&#39;</span><span class=p>},</span>
<span class=ln>26</span>      <span class=n>lualine_y</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;progress&#39;</span><span class=p>},</span>
<span class=ln>27</span>      <span class=n>lualine_z</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;location&#39;</span><span class=p>}</span>
<span class=ln>28</span>    <span class=p>},</span>
<span class=ln>29</span>    <span class=n>inactive_sections</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>30</span>      <span class=n>lualine_a</span> <span class=o>=</span> <span class=p>{},</span>
<span class=ln>31</span>      <span class=n>lualine_b</span> <span class=o>=</span> <span class=p>{},</span>
<span class=ln>32</span>      <span class=n>lualine_c</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;filename&#39;</span><span class=p>},</span>
<span class=ln>33</span>      <span class=n>lualine_x</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;location&#39;</span><span class=p>},</span>
<span class=ln>34</span>      <span class=n>lualine_y</span> <span class=o>=</span> <span class=p>{},</span>
<span class=ln>35</span>      <span class=n>lualine_z</span> <span class=o>=</span> <span class=p>{}</span>
<span class=ln>36</span>    <span class=p>},</span>
<span class=ln>37</span>    <span class=n>tabline</span> <span class=o>=</span> <span class=p>{},</span><span class=n>ftjpnの動作状況</span>
<span class=ln>38</span>
<span class=ln>39</span>    <span class=n>winbar</span> <span class=o>=</span> <span class=p>{},</span>
<span class=ln>40</span>    <span class=n>inactive_winbar</span> <span class=o>=</span> <span class=p>{},</span>
<span class=ln>41</span>    <span class=n>extensions</span> <span class=o>=</span> <span class=p>{}</span>
<span class=ln>42</span>  <span class=p>}</span>
<span class=ln>43</span><span class=n>END</span>
<span class=ln>44</span>
<span class=ln>45</span><span class=s2>&#34; IMEの状態を取得する関数。動作に支障が出るくらい遅くなるため未使用
</span><span class=ln>46</span><span class=s2>function! Get_ime_status()
</span><span class=ln>47</span><span class=s2>  let b:ime_status=system(&#39;spzenhan.exe&#39;)
</span><span class=ln>48</span><span class=s2>  if b:ime_status==1
</span><span class=ln>49</span><span class=s2>    return &#39;IME ON&#39;
</span><span class=ln>50</span><span class=s2>  else
</span><span class=ln>51</span><span class=s2>    return &#39;IME OFF&#39;
</span><span class=ln>52</span><span class=s2>  endif
</span><span class=ln>53</span><span class=s2>endfunction
</span></code></pre></div><p>また、lualine.nvim の導入と合わせて、画面を縦分割してもステータスバーを分割しないという設定も行っています。この設定は、設定ファイルに次の設定を追加すれば可能です。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln>1</span><span class=nx>set</span> <span class=nx>laststatus</span><span class=p>=</span><span class=m>3</span><span class=err>
</span></code></pre></div><p>設定の結果は次のとおりです。</p>
<figure class="figure bsimage">
<img src=lualine.png class="figure-img img-fluid">
<figcaption class="figure-caption fw-light text-center">設定後の lualine.nvim の表示</figcaption>
</figure>
<h2 id=キーバインド変更>キーバインド変更</h2>
<p>上書き保存などを少しでも簡単にできるようにするため、いくつかのキーバインドを設定しました。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln> 1</span><span class=c>&#34; 大文字Ｋでカーソル上のヘルプが見られる設定</span><span class=err>
</span><span class=ln> 2</span><span class=err></span><span class=c>&#34; 日本語ヘルプがあれば日本語版を、無ければ英語版を表示します。</span><span class=err>
</span><span class=ln> 3</span><span class=err></span><span class=c>&#34; 事前に &#39;vim-jp/vimdoc-ja&#39; をインストールする必要があります。</span><span class=err>
</span><span class=ln> 4</span><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=nx>K</span> :<span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>u</span><span class=p>&gt;</span><span class=nx>call</span> <span class=p>&lt;</span><span class=nx>SID</span><span class=p>&gt;</span><span class=nx>show_documentation</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln> 5</span><span class=err></span><span class=k>function</span><span class=p>!</span> <span class=nx>s</span>:<span class=nx>show_documentation</span><span class=p>()</span> <span class=nx>abort</span><span class=err>
</span><span class=ln> 6</span><span class=err></span>  <span class=k>if</span> <span class=nx>index</span><span class=p>(</span>[<span class=s1>&#39;vim&#39;</span><span class=p>,</span><span class=s1>&#39;help&#39;</span>]<span class=p>,</span> &amp;<span class=nx>filetype</span><span class=p>)</span> <span class=p>&gt;=</span> <span class=m>0</span><span class=err>
</span><span class=ln> 7</span><span class=err></span>  <span class=nx>try</span><span class=err>
</span><span class=ln> 8</span><span class=err></span>    <span class=nx>execute</span> <span class=s1>&#39;h &#39;</span> . <span class=nx>expand</span><span class=p>(</span><span class=s1>&#39;&lt;cword&gt;&#39;</span><span class=p>)</span> .. <span class=s2>&#34;@ja&#34;</span><span class=err>
</span><span class=ln> 9</span><span class=err></span>  <span class=nx>catch</span> <span class=sr>/^Vim\%((\a\+)\)\=:E661:/</span><span class=err>
</span><span class=ln>10</span><span class=err></span>    <span class=nx>execute</span> <span class=s1>&#39;h &#39;</span> . <span class=nx>expand</span><span class=p>(</span><span class=s1>&#39;&lt;cword&gt;&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln>11</span><span class=err></span>  <span class=nx>endtry</span><span class=err>
</span><span class=ln>12</span><span class=err></span>  <span class=k>endif</span><span class=err>
</span><span class=ln>13</span><span class=err></span><span class=k>endfunction</span><span class=err>
</span><span class=ln>14</span><span class=err></span><span class=c>
</span><span class=ln>15</span><span class=c>&#34; qa で全てのバッファを閉じる</span><span class=err>
</span><span class=ln>16</span><span class=err></span><span class=nx>nnoremap</span> <span class=nx>qa</span> <span class=nx>qall</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>17</span><span class=err></span><span class=c>
</span><span class=ln>18</span><span class=c>&#34; ;w で保存</span><span class=err>
</span><span class=ln>19</span><span class=err></span><span class=nx>nnoremap</span> ;<span class=nx>w</span> <span class=p>&lt;</span><span class=nx>Cmd</span><span class=p>&gt;</span><span class=nx>update</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span><span class=err>
</span><span class=ln>20</span><span class=err></span><span class=c>
</span><span class=ln>21</span><span class=c>&#34; ; 2連打でコマンドラインに移動</span><span class=err>
</span><span class=ln>22</span><span class=err></span><span class=nx>nnoremap</span> ;; :<span class=err>
</span><span class=ln>23</span><span class=err></span><span class=c>
</span><span class=ln>24</span><span class=c>&#34; ノーマルモードで BackSpace による削除を可能にする</span><span class=err>
</span><span class=ln>25</span><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>BS</span><span class=p>&gt;</span> <span class=nx>X</span><span class=err>
</span></code></pre></div><h2 id=設定ファイル分割>設定ファイル分割</h2>
<p>最初は <code>init.vim</code> に全ての設定を書いていましたが、可読性に欠けるので次のような形で分割することにしました。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>nvim
<span class=ln> 2</span>├── filetype.vim
<span class=ln> 3</span>├── ftplugin
<span class=ln> 4</span>│   └── review.vim
<span class=ln> 5</span>├── init.vim
<span class=ln> 6</span>├── init.vim.backup
<span class=ln> 7</span>├── minimal.lua
<span class=ln> 8</span>└── config_files
<span class=ln> 9</span>    ├── init
<span class=ln>10</span>    │   ├── basic.vim
<span class=ln>11</span>    │   ├── clipboard.vim
<span class=ln>12</span>    │   ├── IME.vim
<span class=ln>13</span>    │   ├── jetpack.vim
<span class=ln>14</span>    │   ├── keymapping.vim
<span class=ln>15</span>    │   ├── lsp.vim
<span class=ln>16</span>    │   └── user_interface.vim
<span class=ln>17</span>    └── plugin
<span class=ln>18</span>        ├── ddc.vim
<span class=ln>19</span>        ├── ddu.vim
<span class=ln>20</span>        ├── ftpjn.vim
<span class=ln>21</span>        └── lualine.vim
</code></pre></div><p>そして、この分割したファイルを <code>init.vim</code> の先頭で読み込んでいます。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln> 1</span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>init</span>/<span class=nx>jetpack</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln> 2</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>init</span>/<span class=nx>basic</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln> 3</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>init</span>/<span class=nx>IME</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln> 4</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>init</span>/<span class=nx>clipboard</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln> 5</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>init</span>/<span class=nx>user_interface</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln> 6</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>init</span>/<span class=nx>keymapping</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln> 7</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>init</span>/<span class=nx>lsp</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln> 8</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>plugin</span>/<span class=nx>ddu</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln> 9</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>plugin</span>/<span class=nx>ddc</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln>10</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>plugin</span>/<span class=nx>ftpjn</span>.<span class=nx>vim</span><span class=err>
</span><span class=ln>11</span><span class=err></span><span class=nx>source</span> $<span class=nx>HOME</span><span class=sr>/.config/</span><span class=nx>nvim</span><span class=sr>/config_files/</span><span class=nx>plugin</span>/<span class=nx>lualine</span>.<span class=nx>vim</span><span class=err>
</span></code></pre></div><p>なお、<code>runtime! config_files/init/*.vim</code>、<code>runtime! config_files/plugins/*.vim</code> の2行を <code>init.vim</code> の先頭に書いて自動的に設定ファイルを読み込む方法を紹介しているサイトがあり、私もその方法を一度採用しましたが、プラグインが機能しなかったため、上記のように愚直に設定ファイルを読み込む方法に変えました。</p>
<h2 id=reviewのシンタックスハイライト>Re:VIEWのシンタックスハイライト</h2>
<p>Re:VIEW は Neovim にデフォルトで登録されているファイルタイプではないため、当然シンタックスハイライトも用意されていません。そのため、シンタックスハイライトは手動で設定する必要があります。</p>
<p>とはいえ、シンタックスハイライトの設定を公開（<a href=https://github.com/tokorom/vim-review>tokorom/vim-review: Vim syntax for Re:VIEW</a>）してくださっている方がいますので、その方の設定を拝借することにしました。</p>
<p>手順は次のとおりです。なお、Re:VIEW のファイルタイプ判定は、上記の「アウトラインバッファの作成」を参照してください。</p>
<p>まず、<code>.config/nvim/ftplugin/review.vim</code> を作成して、次のコードを記述します。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln> 1</span><span class=c>&#34; .config/nvim/ftplugin/review.vim</span><span class=err>
</span><span class=ln> 2</span><span class=err></span><span class=nx>setl</span> <span class=nx>commentstring</span><span class=p>=</span>#@#\ %<span class=nx>s</span><span class=err>
</span><span class=ln> 3</span><span class=err>
</span><span class=ln> 4</span><span class=err></span><span class=k>if</span> <span class=p>!</span><span class=nx>exists</span><span class=p>(</span><span class=s1>&#39;g:vim_review#include_filetypes&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln> 5</span><span class=err></span>  <span class=k>let</span> <span class=nx>g</span>:<span class=nx>vim_review</span>#<span class=nx>include_filetypes</span> <span class=p>=</span> []<span class=err>
</span><span class=ln> 6</span><span class=err></span><span class=k>endif</span><span class=err>
</span><span class=ln> 7</span><span class=err>
</span><span class=ln> 8</span><span class=err></span><span class=k>if</span> <span class=p>!</span><span class=nx>exists</span><span class=p>(</span><span class=s1>&#39;g:vim_review#include_grouplists&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln> 9</span><span class=err></span>  <span class=k>let</span> <span class=nx>g</span>:<span class=nx>vim_review</span>#<span class=nx>include_grouplists</span> <span class=p>=</span> {}<span class=err>
</span><span class=ln>10</span><span class=err></span>  <span class=nx>for</span> <span class=nx>ft</span> <span class=nx>in</span> <span class=nx>g</span>:<span class=nx>vim_review</span>#<span class=nx>include_filetypes</span><span class=err>
</span><span class=ln>11</span><span class=err></span>    <span class=k>let</span> <span class=nx>g</span>:<span class=nx>vim_review</span>#<span class=nx>include_grouplists</span>[<span class=nx>ft</span>] <span class=p>=</span> <span class=s1>&#39;syntax/&#39;</span> . <span class=nx>ft</span> . <span class=s1>&#39;.vim&#39;</span><span class=err>
</span><span class=ln>12</span><span class=err></span>  <span class=nx>endfor</span><span class=err>
</span><span class=ln>13</span><span class=err></span><span class=k>endif</span><span class=err>
</span></code></pre></div><p>それから、<code>.config/nvim/syntax/review.vim</code> を作成して次のコードを記述します。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=ln>  1</span><span class=c>&#34; .config/nvim/syntax/review.vim</span><span class=err>
</span><span class=ln>  2</span><span class=err></span><span class=c>&#34; Vim syntax file</span><span class=err>
</span><span class=ln>  3</span><span class=err></span><span class=c>&#34; Language: Re:VIEW</span><span class=err>
</span><span class=ln>  4</span><span class=err></span><span class=c>&#34; Maintainer: Yuta Tokoro &lt;tokorom@gmail.com&gt;</span><span class=err>
</span><span class=ln>  5</span><span class=err>
</span><span class=ln>  6</span><span class=err></span><span class=k>if</span> <span class=nx>exists</span><span class=p>(</span><span class=s2>&#34;b:current_syntax&#34;</span><span class=p>)</span><span class=err>
</span><span class=ln>  7</span><span class=err></span>    <span class=nx>finish</span><span class=err>
</span><span class=ln>  8</span><span class=err></span><span class=k>endif</span><span class=err>
</span><span class=ln>  9</span><span class=err></span><span class=c>
</span><span class=ln> 10</span><span class=c>&#34; ----------</span><span class=err>
</span><span class=ln> 11</span><span class=err></span><span class=c>&#34; syntax</span><span class=err>
</span><span class=ln> 12</span><span class=err>
</span><span class=ln> 13</span><span class=err></span><span class=nx>syn</span> <span class=nx>case</span> <span class=nx>match</span><span class=err>
</span><span class=ln> 14</span><span class=err>
</span><span class=ln> 15</span><span class=err></span><span class=nx>syn</span> <span class=nx>match</span> <span class=nx>reviewHeading</span> <span class=nx>contains</span><span class=p>=</span><span class=nx>reviewInlineCommand</span><span class=p>,</span><span class=nx>reviewInlineStyleCommand</span><span class=err>
</span><span class=ln> 16</span><span class=err></span>      \ <span class=s2>&#34;^=\+\%(\s\+\|{\|\[\).*&#34;</span><span class=err>
</span><span class=ln> 17</span><span class=err>
</span><span class=ln> 18</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewInlineCommand</span> <span class=nx>oneline</span><span class=err>
</span><span class=ln> 19</span><span class=err></span>      \ <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;@&lt;\w\+&gt;{&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;}&#34;</span><span class=err>
</span><span class=ln> 20</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewInlineStyleCommand</span> <span class=nx>transparent</span> <span class=nx>oneline</span><span class=err>
</span><span class=ln> 21</span><span class=err></span>      \ <span class=nx>matchgroup</span><span class=p>=</span><span class=nx>reviewInlineCommand</span><span class=err>
</span><span class=ln> 22</span><span class=err></span>      \ <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;@&lt;\%\(kw\|bou\|ami\|u\|b\|i\|strong\|em\|tt\|tti\|ttb\|code\|tcy\)&gt;{&#34;</span><span class=err>
</span><span class=ln> 23</span><span class=err></span>      \ <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;}&#34;</span><span class=err>
</span><span class=ln> 24</span><span class=err>
</span><span class=ln> 25</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewBlockCommand</span> <span class=nx>transparent</span> <span class=nx>keepend</span><span class=err>
</span><span class=ln> 26</span><span class=err></span>      \ <span class=nx>matchgroup</span><span class=p>=</span><span class=nx>reviewBlockDeclaration</span> <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;^//\w\+\[\?.*{\s*$&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;^//}\s*$&#34;</span><span class=err>
</span><span class=ln> 27</span><span class=err>
</span><span class=ln> 28</span><span class=err></span><span class=nx>syn</span> <span class=nx>match</span> <span class=nx>reviewBlockCommandWithoutContent</span><span class=err>
</span><span class=ln> 29</span><span class=err></span>      \ <span class=s2>&#34;^//\w\+\[.*[^{]\s*$&#34;</span><span class=err>
</span><span class=ln> 30</span><span class=err></span><span class=nx>syn</span> <span class=nx>match</span> <span class=nx>reviewControlCommand</span><span class=err>
</span><span class=ln> 31</span><span class=err></span>      \ <span class=s2>&#34;^//\&lt;\%\(noindent\|blankline\|linebreak\|pagebreak\)\&gt;\s*$&#34;</span><span class=err>
</span><span class=ln> 32</span><span class=err>
</span><span class=ln> 33</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewItemize</span> <span class=nx>transparent</span> <span class=nx>oneline</span><span class=err>
</span><span class=ln> 34</span><span class=err></span>      \ <span class=nx>matchgroup</span><span class=p>=</span><span class=nx>reviewItemizePrefix</span> <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;^\s\+\*\+\s\+&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;$&#34;</span><span class=err>
</span><span class=ln> 35</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewOrderedItemize</span> <span class=nx>transparent</span> <span class=nx>oneline</span><span class=err>
</span><span class=ln> 36</span><span class=err></span>      \ <span class=nx>matchgroup</span><span class=p>=</span><span class=nx>reviewItemizePrefix</span> <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;^\s\+[0-9]\+\.\s\+&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;$&#34;</span><span class=err>
</span><span class=ln> 37</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewDefinitionList</span> <span class=nx>transparent</span> <span class=nx>oneline</span><span class=err>
</span><span class=ln> 38</span><span class=err></span>      \ <span class=nx>matchgroup</span><span class=p>=</span><span class=nx>reviewItemizePrefix</span> <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;^\s\+\:\s\+&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;$&#34;</span><span class=err>
</span><span class=ln> 39</span><span class=err>
</span><span class=ln> 40</span><span class=err></span><span class=nx>syn</span> <span class=nx>match</span> <span class=nx>reviewComment</span> <span class=nx>contains</span><span class=p>=</span><span class=nx>reviewTodo</span><span class=err>
</span><span class=ln> 41</span><span class=err></span>      \ <span class=s2>&#34;^#@.*&#34;</span><span class=err>
</span><span class=ln> 42</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewCommentBlock</span> <span class=nx>keepend</span> <span class=nx>contains</span><span class=p>=</span><span class=nx>reviewTodo</span><span class=err>
</span><span class=ln> 43</span><span class=err></span>      \ <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;^//\&lt;comment\&gt;\[\?.*{\s*&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;^//}\s*$&#34;</span><span class=err>
</span><span class=ln> 44</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewCommentInline</span> <span class=nx>oneline</span> <span class=nx>contains</span><span class=p>=</span><span class=nx>reviewTodo</span><span class=err>
</span><span class=ln> 45</span><span class=err></span>      \ <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;@&lt;comment&gt;{&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;}&#34;</span><span class=err>
</span><span class=ln> 46</span><span class=err>
</span><span class=ln> 47</span><span class=err></span><span class=nx>syn</span> <span class=nx>match</span> <span class=nx>reviewPreProcCommand</span><span class=err>
</span><span class=ln> 48</span><span class=err></span>      \ <span class=s2>&#34;^#@\&lt;\%\(require\|provide\)\&gt;\s\+.*&#34;</span><span class=err>
</span><span class=ln> 49</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewPreProcBlockCommand</span> <span class=nx>keepend</span><span class=err>
</span><span class=ln> 50</span><span class=err></span>      \ <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;^#@\&lt;\%\(mapfile\|maprange\|mapoutput\)\&gt;(.*).*&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;^#@end\s*$&#34;</span><span class=err>
</span><span class=ln> 51</span><span class=err>
</span><span class=ln> 52</span><span class=err></span><span class=nx>syn</span> <span class=nx>region</span> <span class=nx>reviewWarning</span> <span class=nx>oneline</span><span class=err>
</span><span class=ln> 53</span><span class=err></span>      \ <span class=nx>matchgroup</span><span class=p>=</span><span class=nx>reviewPreProcCommand</span> <span class=nx>start</span><span class=p>=</span><span class=s2>&#34;^#@warn(&#34;</span> <span class=nx>end</span><span class=p>=</span><span class=s2>&#34;).*$&#34;</span><span class=err>
</span><span class=ln> 54</span><span class=err>
</span><span class=ln> 55</span><span class=err></span><span class=nx>syn</span> <span class=nx>case</span> <span class=nx>ignore</span><span class=err>
</span><span class=ln> 56</span><span class=err></span><span class=nx>syn</span> <span class=nx>keyword</span> <span class=nx>reviewTodo</span> <span class=nx>MARK</span> <span class=nx>TODO</span> <span class=nx>FIXME</span> <span class=nx>contained</span><span class=err>
</span><span class=ln> 57</span><span class=err></span><span class=nx>syn</span> <span class=nx>case</span> <span class=nx>match</span><span class=err>
</span><span class=ln> 58</span><span class=err></span><span class=c>
</span><span class=ln> 59</span><span class=c>&#34; ----------</span><span class=err>
</span><span class=ln> 60</span><span class=err></span><span class=c>&#34; include other languages</span><span class=err>
</span><span class=ln> 61</span><span class=err>
</span><span class=ln> 62</span><span class=err></span><span class=k>if</span> <span class=nx>exists</span><span class=p>(</span><span class=s1>&#39;g:vim_review#include_grouplists&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln> 63</span><span class=err></span>  <span class=k>let</span> <span class=nx>include_grouplists</span> <span class=p>=</span> <span class=nx>g</span>:<span class=nx>vim_review</span>#<span class=nx>include_grouplists</span><span class=err>
</span><span class=ln> 64</span><span class=err></span>  <span class=k>let</span> <span class=nx>operations</span> <span class=p>=</span> <span class=s1>&#39;\&lt;\%\(list\|listnum\|emlist\|emlistnum\)\&gt;&#39;</span><span class=err>
</span><span class=ln> 65</span><span class=err>
</span><span class=ln> 66</span><span class=err></span>  <span class=nx>for</span> <span class=nx>ft</span> <span class=nx>in</span> <span class=nx>keys</span><span class=p>(</span><span class=nx>include_grouplists</span><span class=p>)</span><span class=err>
</span><span class=ln> 67</span><span class=err></span>    <span class=k>let</span> <span class=nx>syntaxfile</span> <span class=p>=</span> <span class=nx>include_grouplists</span>[<span class=nx>ft</span>]<span class=err>
</span><span class=ln> 68</span><span class=err></span>    <span class=nx>execute</span> <span class=s1>&#39;syn include @&#39;</span> . <span class=nx>ft</span> . <span class=s1>&#39; &#39;</span> . <span class=nx>syntaxfile</span><span class=err>
</span><span class=ln> 69</span><span class=err></span>    <span class=k>let</span> <span class=nx>code_block_region</span> <span class=p>=</span> <span class=s1>&#39;start=&#34;^//&#39;</span> . <span class=nx>operations</span> . <span class=s1>&#39;\[.*\[&#39;</span> . <span class=nx>ft</span> . <span class=s1>&#39;\]{\s*$&#34;&#39;</span><span class=err>
</span><span class=ln> 70</span><span class=err></span>          \ . <span class=s1>&#39; end=&#34;^//}\s*$&#34;&#39;</span><span class=err>
</span><span class=ln> 71</span><span class=err></span>    <span class=k>let</span> <span class=nx>groupname</span> <span class=p>=</span> <span class=s1>&#39;reviewCodeBlock_&#39;</span> . <span class=nx>ft</span><span class=err>
</span><span class=ln> 72</span><span class=err></span>    <span class=nx>execute</span> <span class=s1>&#39;syn region &#39;</span> . <span class=nx>groupname</span> . <span class=s1>&#39; keepend contains=@&#39;</span> . <span class=nx>ft</span><span class=err>
</span><span class=ln> 73</span><span class=err></span>          \ . <span class=s1>&#39; matchgroup=reviewBlockDeclaration&#39;</span><span class=err>
</span><span class=ln> 74</span><span class=err></span>          \ . <span class=s1>&#39; &#39;</span> . <span class=nx>code_block_region</span><span class=err>
</span><span class=ln> 75</span><span class=err>
</span><span class=ln> 76</span><span class=err></span>    <span class=k>if</span> <span class=nx>exists</span><span class=p>(</span><span class=s1>&#39;b:current_syntax&#39;</span><span class=p>)</span><span class=err>
</span><span class=ln> 77</span><span class=err></span>      <span class=nx>unlet</span> <span class=nx>b</span>:<span class=nx>current_syntax</span><span class=err>
</span><span class=ln> 78</span><span class=err></span>    <span class=k>endif</span><span class=err>
</span><span class=ln> 79</span><span class=err></span>  <span class=nx>endfor</span><span class=err>
</span><span class=ln> 80</span><span class=err></span><span class=k>endif</span><span class=err>
</span><span class=ln> 81</span><span class=err></span><span class=c>
</span><span class=ln> 82</span><span class=c>&#34; ----------</span><span class=err>
</span><span class=ln> 83</span><span class=err></span><span class=c>&#34; highlight</span><span class=err>
</span><span class=ln> 84</span><span class=err>
</span><span class=ln> 85</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewHeading</span> <span class=nx>Conditional</span><span class=err>
</span><span class=ln> 86</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewInlineCommand</span> <span class=nx>Function</span><span class=err>
</span><span class=ln> 87</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewBlockDeclaration</span> <span class=nx>Identifier</span><span class=err>
</span><span class=ln> 88</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewBlockCommandWithoutContent</span> <span class=nx>Identifier</span><span class=err>
</span><span class=ln> 89</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewControlCommand</span> <span class=nx>Identifier</span><span class=err>
</span><span class=ln> 90</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewItemizePrefix</span> <span class=nx>Special</span><span class=err>
</span><span class=ln> 91</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewComment</span> <span class=nx>Comment</span><span class=err>
</span><span class=ln> 92</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewCommentBlock</span> <span class=nx>Comment</span><span class=err>
</span><span class=ln> 93</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewCommentInline</span> <span class=nx>Comment</span><span class=err>
</span><span class=ln> 94</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewPreProcCommand</span> <span class=nx>PreProc</span><span class=err>
</span><span class=ln> 95</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewPreProcBlockCommand</span> <span class=nx>PreProc</span><span class=err>
</span><span class=ln> 96</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewWarning</span> <span class=nx>Underlined</span><span class=err>
</span><span class=ln> 97</span><span class=err></span><span class=nx>hi</span> <span class=nx>def</span> <span class=nx>link</span> <span class=nx>reviewTodo</span> <span class=nx>Todo</span><span class=err>
</span><span class=ln> 98</span><span class=err></span><span class=c>
</span><span class=ln> 99</span><span class=c>&#34; ----------</span><span class=err>
</span><span class=ln>100</span><span class=err>
</span><span class=ln>101</span><span class=err></span><span class=k>let</span> <span class=nx>b</span>:<span class=nx>current_syntax</span> <span class=p>=</span> <span class=s2>&#34;review&#34;</span><span class=err>
</span></code></pre></div><p>なお、シンタックスハイライトを設定したのに一部のキーワードがハイライトされない場合、テーマの色とバッティングしている可能性があります。私も <a href=https://github.com/shaunsingh/nord.nvim>shaunsingh/nord.nvim: Neovim theme based off of the Nord Color Palette, written in lua with tree sitter support</a> テーマを設定していたところ、一部のキーワードがハイライトされなかったので、テーマの色が邪魔をしているのではないかと疑って別のテーマにしたら全てのキーワードがハイライトされました。</p>
<p>ちなみに、変更後のテーマは <a href=https://github.com/protesilaos/tempus-themes>protesilaos/tempus-themes: [Mirror] Tempus is a collection of themes for Vim, text editors, and terminal emulators that are compliant at the very least with the WCAG AA accessibility standard for colour contrast</a> の tempus_classic です。</p>
<h2 id=noicenvim-の導入>noice.nvim の導入</h2>
<p>Neovim だとコマンドラインバッファがエディタの下の端にありますが、VSCode だとコマンドパレットがエディタの上半分の区域のちょうど良い場所にポップアップするので、Neovim でも同じような機能が欲しいと思って <a href=https://github.com/folke/noice.nvim/>folke/noice.nvim: 💥 Highly experimental plugin that completely replaces the UI for messages, cmdline and the popupmenu.</a> を導入してみました。</p>
<p>ddc.vim も設定してコマンドライン補完もできるようにしたのですが、入力カーソルが表示されないという問題が発生し、公式リポジトリの Issues にも同じ症状が投稿（<a href=https://github.com/folke/noice.nvim/issues/251>Invisible cursor in cmdline popup · Issue #251 · folke/noice.nvim</a>）されていましたので、問題が解消されるまで様子見かなと思い、この後に紹介する <a href=https://github.com/VonHeikemen/fine-cmdline.nvim>VonHeikemen/fine-cmdline.nvim: Enter ex-commands in a nice floating input.</a> に切り替えました。</p>
<p>ところが、作者が「その問題はカラースキーマがカーソルのカラーを提供しないことが原因だ」と<a href=https://github.com/folke/noice.nvim/issues/251#issuecomment-1367776788>コメント</a>したのを見て、カラースキーマを変えた今なら問題が解消されているかもと思ってプラグインを再び有効化したところ、問題なく入力カーソルが表示されました。そのため、本プラグインを引き続き利用することにしました。</p>
<p>現在の設定は次のとおりです。公式リポジトリの設定例などを継ぎ接ぎしたもので詳細は勉強中です。<code>noice.vim</code> ファイルで設定しているため、先頭に <code>lua &lt;&lt; END</code> を追加し、末尾に <code>END</code> を追加しています。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=ln> 1</span><span class=n>lua</span> <span class=o>&lt;&lt;</span> <span class=n>END</span>
<span class=ln> 2</span><span class=n>require</span><span class=p>(</span><span class=s2>&#34;noice&#34;</span><span class=p>).</span><span class=n>setup</span><span class=p>({</span>
<span class=ln> 3</span>  <span class=c1>-- you can enable a preset for easier configuration</span>
<span class=ln> 4</span>  <span class=n>presets</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln> 5</span>    <span class=n>bottom_search</span> <span class=o>=</span> <span class=kc>false</span><span class=p>,</span> <span class=c1>-- use a classic bottom cmdline for search</span>
<span class=ln> 6</span>    <span class=n>command_palette</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>-- position the cmdline and popupmenu together</span>
<span class=ln> 7</span>    <span class=n>long_message_to_split</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>-- long messages will be sent to a split</span>
<span class=ln> 8</span>    <span class=n>inc_rename</span> <span class=o>=</span> <span class=kc>false</span><span class=p>,</span> <span class=c1>-- enables an input dialog for inc-rename.nvim</span>
<span class=ln> 9</span>    <span class=n>lsp_doc_border</span> <span class=o>=</span> <span class=kc>false</span><span class=p>,</span> <span class=c1>-- add a border to hover docs and signature help</span>
<span class=ln>10</span>  <span class=p>},</span>
<span class=ln>11</span>  <span class=n>messages</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>12</span>    <span class=n>view_search</span> <span class=o>=</span> <span class=s1>&#39;notify&#39;</span><span class=p>,</span>
<span class=ln>13</span>  <span class=p>},</span>
<span class=ln>14</span>  <span class=n>routes</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>15</span>    <span class=p>{</span>
<span class=ln>16</span>      <span class=n>view</span> <span class=o>=</span> <span class=s2>&#34;notify&#34;</span><span class=p>,</span>
<span class=ln>17</span>      <span class=n>filter</span> <span class=o>=</span> <span class=p>{</span> <span class=n>event</span> <span class=o>=</span> <span class=s2>&#34;msg_showmode&#34;</span> <span class=p>},</span>
<span class=ln>18</span>    <span class=p>},</span>
<span class=ln>19</span>    <span class=p>{</span>
<span class=ln>20</span>      <span class=n>filter</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>21</span>        <span class=n>event</span> <span class=o>=</span> <span class=s2>&#34;notify&#34;</span><span class=p>,</span>
<span class=ln>22</span>        <span class=n>warning</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
<span class=ln>23</span>        <span class=n>find</span> <span class=o>=</span> <span class=s2>&#34;failed to run generator.*is not executable&#34;</span><span class=p>,</span>
<span class=ln>24</span>      <span class=p>},</span>
<span class=ln>25</span>      <span class=n>opts</span> <span class=o>=</span> <span class=p>{</span> <span class=n>skip</span> <span class=o>=</span> <span class=kc>true</span> <span class=p>},</span>
<span class=ln>26</span>    <span class=p>},</span>
<span class=ln>27</span>  <span class=p>},</span>
<span class=ln>28</span>  <span class=n>cmdline</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>29</span>    <span class=n>enabled</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
<span class=ln>30</span>    <span class=n>menu</span> <span class=o>=</span> <span class=s1>&#39;popup&#39;</span><span class=p>,</span>
<span class=ln>31</span>  <span class=p>},</span>
<span class=ln>32</span>  <span class=n>views</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>33</span>    <span class=n>cmdline_popup</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>34</span>      <span class=n>position</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>35</span>        <span class=n>row</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span>
<span class=ln>36</span>        <span class=n>col</span> <span class=o>=</span> <span class=s2>&#34;50%&#34;</span><span class=p>,</span>
<span class=ln>37</span>      <span class=p>},</span>
<span class=ln>38</span>      <span class=n>size</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>39</span>        <span class=n>width</span> <span class=o>=</span> <span class=mi>60</span><span class=p>,</span>
<span class=ln>40</span>        <span class=n>height</span> <span class=o>=</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span>
<span class=ln>41</span>      <span class=p>},</span>
<span class=ln>42</span>    <span class=p>},</span>
<span class=ln>43</span>    <span class=n>popupmenu</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>44</span>      <span class=n>relative</span> <span class=o>=</span> <span class=s2>&#34;editor&#34;</span><span class=p>,</span>
<span class=ln>45</span>      <span class=n>position</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>46</span>        <span class=n>row</span> <span class=o>=</span> <span class=mi>8</span><span class=p>,</span>
<span class=ln>47</span>        <span class=n>col</span> <span class=o>=</span> <span class=s2>&#34;50%&#34;</span><span class=p>,</span>
<span class=ln>48</span>      <span class=p>},</span>
<span class=ln>49</span>      <span class=n>size</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>50</span>        <span class=n>width</span> <span class=o>=</span> <span class=mi>60</span><span class=p>,</span>
<span class=ln>51</span>        <span class=n>height</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span>
<span class=ln>52</span>      <span class=p>},</span>
<span class=ln>53</span>      <span class=n>border</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>54</span>        <span class=n>style</span> <span class=o>=</span> <span class=s2>&#34;rounded&#34;</span><span class=p>,</span>
<span class=ln>55</span>        <span class=n>padding</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span> <span class=p>},</span>
<span class=ln>56</span>      <span class=p>},</span>
<span class=ln>57</span>      <span class=n>win_options</span> <span class=o>=</span> <span class=p>{</span>
<span class=ln>58</span>        <span class=n>cursorline</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
<span class=ln>59</span>        <span class=n>cursorlineopt</span> <span class=o>=</span> <span class=s1>&#39;line&#39;</span><span class=p>,</span>
<span class=ln>60</span>        <span class=n>winhighlight</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Normal</span> <span class=o>=</span> <span class=s2>&#34;Normal&#34;</span><span class=p>,</span> <span class=n>FloatBorder</span> <span class=o>=</span> <span class=s2>&#34;DiagnosticInfo&#34;</span> <span class=p>},</span>
<span class=ln>61</span>      <span class=p>},</span>
<span class=ln>62</span>    <span class=p>},</span>
<span class=ln>63</span>  <span class=p>},</span>
<span class=ln>64</span><span class=p>})</span>
<span class=ln>65</span><span class=n>END</span>
</code></pre></div><h2 id=導入したものの廃止したもの>導入したものの廃止したもの</h2>
<h3 id=fine-cmdlinenvim>fine-cmdline.nvim</h3>
<p>noice.nvim の使用を一度断念した後、同様の機能を持つプラグインである <a href=https://github.com/VonHeikemen/fine-cmdline.nvim>VonHeikemen/fine-cmdline.nvim: Enter ex-commands in a nice floating input.</a> を使ってみました。</p>
<p>こちらは入力カーソルが消失するような不具合が無く、ddc.vim による補完もできるのですが、上下キーで履歴を移動する度に画面がちらつく上、動作もキビキビしているとは言い難かったため使用を断念しました。</p>
<h2 id=参考にしたサイト情報>参考にしたサイト・情報</h2>
<ul>
<li><a href=https://qiita.com/yuku_t/items/0c1aff03949cb1b8fe6b>vimgrepとQuickfix知らないVimmerはちょっとこっち来い - Qiita</a></li>
<li><a href=https://alpacat.com/blog/ddu-ui-filer>Vimファイラの決定版「ddu-ui-filer」設定例を紹介 - アルパカログ</a></li>
<li><a href=https://spinners.work/posts/vim-review/>Vimで技術書を執筆する環境 with Re:VIEW + RedPen + prh | Spinners Inc.</a></li>
<li><a href=https://wed.dev/blog/posts/neovim-statuline>とある PR のおかげで Neovim がもはや VSCode な件について</a></li>
<li><a href=https://original-game.com/how-to-use-ddc-vim/>Vimの自動補完プラグイン「ddc.vim」の使い方</a></li>
<li><a href=https://ja.stackoverflow.com/questions/1685/vim%E8%B5%B7%E5%8B%95%E6%99%82%E3%81%AB%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E7%B8%A6%E5%88%86%E5%89%B2%E2%86%92%E5%8F%B3%E5%81%B4%E3%81%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E9%96%8B%E3%81%8F%E6%96%B9%E6%B3%95>vim - Vim起動時にウィンドウ縦分割→右側にファイルを開く方法 - スタック・オーバーフロー</a></li>
<li><a href=https://zenn.dev/shougo/articles/ddu-vim-beta#ddu.vim-%E3%81%AE%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95>新世代の UI 作成プラグイン ddu.vim</a></li>
<li><a href=https://zenn.dev/shougo/articles/ddc-vim-pum-vim>自動補完プラグイン ddc.vim + pum.vim</a></li>
<li><a href=https://zenn.dev/shougo/articles/ddu-vim-beta>新世代の UI 作成プラグイン ddu.vim</a></li>
<li><a href=https://zenn.dev/shougo/articles/ddu-ui-filer#ddu-ui-filer-%E3%81%AE%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95>新世代のファイラー UI ddu-ui-filer</a></li>
<li><a href=https://zenn.dev/shougo/articles/set-cmdheight-0>cmdheight=0 in neovim</a></li>
<li><a href=https://ntsk.jp/blog/ddc-vim/>Neovimの補完をddc.vim + Built-in LSP へ移行した | ntsk</a></li>
<li><a href=https://alpacat.com/blog/ddu-ui-filer>Vimファイラの決定版「ddu-ui-filer」設定例を紹介 - アルパカログ</a></li>
<li><a href=https://dev.classmethod.jp/articles/eetann-noice-nvim-beginner/>Neovimのコマンドラインや通知がリッチになるnoice.nvim使ってみた | DevelopersIO</a></li>
<li>Vim のヘルプファイル</li>
</ul>
</div>
<div class=post_comments>
<script src=https://utteranc.es/client.js repo=s-show/s-show.github.io issue-term=title theme=github-dark label=comment crossorigin=anonymous async></script>
</div>
</article>
<aside class=sidebar>
<section class=sidebar_inner>
<br>
<div class=search>
<input type=search class="search_field form_field" placeholder=検索... id=find autocomplete=off data-scope=posts>
<label for=find class=search_label><svg class="icon"><title>search</title><use xlink:href="#search"/></svg>
</label>
<div class="search_results results"></div>
</div>
<div class=author_header>
<img src=https://s-show.github.io/img/profileIcon.png alt="s-show photo">
<h2>s-show</h2>
</div>
<div class=author_bio>
プログラミングや3Dプリンタやキーボードなどが好きな平凡な公務員
</div>
<a href=https://s-show.github.io/about/ class="button mt-1" role=button title=続きを読む>続きを読む</a>
<h2 class=mt-4>最近の投稿</h2>
<ul class=flex-column>
<li>
<a href=https://s-show.github.io/posts/2023-10-08/ class=nav-link title="Klipper の Skew correction でプリンタの歪みによる問題を解消する">Klipper の Skew correction でプリンタの歪みによる問題を解消する</a>
</li>
<li>
<a href=https://s-show.github.io/posts/2023-10-07/ class=nav-link title="leaflet 覚書">leaflet 覚書</a>
</li>
<li>
<a href=https://s-show.github.io/posts/2023-05-28/ class=nav-link title="Whisper を Windows ローカルで使うための作業">Whisper を Windows ローカルで使うための作業</a>
</li>
<li>
<a href=https://s-show.github.io/posts/2023-04-30/ class=nav-link title="特定のプリンタの設定だけを有効化した SuperSlicer を起動する方法">特定のプリンタの設定だけを有効化した SuperSlicer を起動する方法</a>
</li>
<li>
<a href=https://s-show.github.io/posts/2023-04-11/ class=nav-link title="ChatGPT と Whisper を使って記事を書いてみました">ChatGPT と Whisper を使って記事を書いてみました</a>
</li>
<li>
<a href=https://s-show.github.io/posts/2023-04-08/ class=nav-link title=3Dプリンタのステッピングモーターの配線について>3Dプリンタのステッピングモーターの配線について</a>
</li>
<li>
<a href=https://s-show.github.io/posts/2023-03-16/ class=nav-link title=PDFファイルの切り出しと圧縮方法>PDFファイルの切り出しと圧縮方法</a>
</li>
<li>
<a href=https://s-show.github.io/posts/2023-03-15/ class=nav-link title="OpenSCAD で作成されたデータを Fusion360 で編集する方法">OpenSCAD で作成されたデータを Fusion360 で編集する方法</a>
</li>
</ul>
<div>
<h2 class="mt-4 taxonomy" id=tags-section>タグ</h2>
<nav class=tags_nav>
<a href=https://s-show.github.io/tags/%E5%82%99%E5%BF%98%E9%8C%B2/ class="post_tag button button_translucent" title=備忘録>
備忘録
<span class=button_tally>24</span>
</a>
<a href=https://s-show.github.io/tags/3d%E3%83%97%E3%83%AA%E3%83%B3%E3%82%BF/ class="post_tag button button_translucent" title=3dプリンタ>
3Dプリンタ
<span class=button_tally>16</span>
</a>
<a href=https://s-show.github.io/tags/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/ class="post_tag button button_translucent" title=プログラミング>
プログラミング
<span class=button_tally>8</span>
</a>
<a href=https://s-show.github.io/tags/%E8%87%AA%E4%BD%9C%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89/ class="post_tag button button_translucent" title=自作キーボード>
自作キーボード
<span class=button_tally>6</span>
</a>
<a href=https://s-show.github.io/tags/klipper/ class="post_tag button button_translucent" title=klipper>
KLIPPER
<span class=button_tally>4</span>
</a>
<a href=https://s-show.github.io/tags/%E8%AA%AD%E6%9B%B8%E8%A8%98%E9%8C%B2/ class="post_tag button button_translucent" title=読書記録>
読書記録
<span class=button_tally>3</span>
</a>
<a href=https://s-show.github.io/tags/mac/ class="post_tag button button_translucent" title=mac>
MAC
<span class=button_tally>2</span>
</a>
<a href=https://s-show.github.io/tags/mainsail/ class="post_tag button button_translucent" title=mainsail>
MAINSAIL
<span class=button_tally>2</span>
</a>
<a href=https://s-show.github.io/tags/%E6%9C%AA%E5%88%86%E9%A1%9E/ class="post_tag button button_translucent" title=未分類>
未分類
<span class=button_tally>2</span>
</a>
<a href=https://s-show.github.io/tags/chatgpt/ class="post_tag button button_translucent" title=chatgpt>
CHATGPT
<span class=button_tally>1</span>
</a>
<a href=https://s-show.github.io/tags/karabiner-elements/ class="post_tag button button_translucent" title=karabiner-elements>
KARABINER-ELEMENTS
<span class=button_tally>1</span>
</a>
<a href=https://s-show.github.io/tags/neovim/ class="post_tag button button_translucent" title=neovim>
NEOVIM
<span class=button_tally>1</span>
</a>
<a href=https://s-show.github.io/tags/whisper/ class="post_tag button button_translucent" title=whisper>
WHISPER
<span class=button_tally>1</span>
</a>
<a href=https://s-show.github.io/tags/%E5%A4%AA%E5%B9%B3%E6%B4%8B%E6%88%A6%E4%BA%89/ class="post_tag button button_translucent" title=太平洋戦争>
太平洋戦争
<span class=button_tally>1</span>
</a>
<a href=https://s-show.github.io/tags/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92/ class="post_tag button button_translucent" title=機械学習>
機械学習
<span class=button_tally>1</span>
</a>
<a href=https://s-show.github.io/tags/%E8%AA%AD%E6%9B%B8/ class="post_tag button button_translucent" title=読書>
読書
<span class=button_tally>1</span>
</a>
</nav>
</div>
</section>
</aside>
</div>
</main><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab"><path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6.0L12.3 74.8z"/><path d="M12.3 74.7.5 111c-1 3.2.0 6.8 3 8.8l101.6 74-92.5-119z"/><path d="M105 193.7l-38.6-119h-54l92.7 119z"/><path d="M105 193.7l38.7-119H66.4l38.7 119z"/><path d="M105 193.7l38.7-119H198l-93 119z"/><path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/><path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6.0L198 74.8z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord"><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527.41542 45.5603.39851 45.468.440769 45.4204.525289 44.7963 1.6353 44.105 3.0834 43.6209 4.2216c-5.4572-.817-10.8864-.817-16.2317.0C26.905 3.0581 26.1886 1.6353 25.5617.525289 25.5141.443589 25.4218.40133 25.3294.41542c-5.071.87338-9.9237 2.40318-14.4518 4.48238C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795 1.57795 18.7309-.943561 32.1443.293408 45.3914.299005 45.4562.335386 45.5182.385761 45.5576 6.45866 50.0174 12.3413 52.7249 18.1147 54.5195 18.2071 54.5477 18.305 54.5139 18.3638 54.4378 19.7295 52.5728 20.9469 50.6063 21.9907 48.5383 22.0523 48.4172 21.9935 48.2735 21.8676 48.2256 19.9366 47.4931 18.0979 46.6 16.3292 45.5858 16.1893 45.5041 16.1781 45.304 16.3068 45.2082 16.679 44.9293 17.0513 44.6391 17.4067 44.3461 17.471 44.2926 17.5606 44.2813 17.6362 44.3151c11.6196 5.3051 24.1992 5.3051 35.6817.0C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433 53.9057 44.6363 54.2779 44.9293 54.6529 45.2082 54.7816 45.304 54.7732 45.5041 54.6333 45.5858c-1.7687 1.0339-3.6074 1.9073-5.5412 2.637C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383c1.0662 2.0651 2.2836 4.0316 3.6241 5.8967C52.6519 54.5139 52.7526 54.5477 52.845 54.5195c5.8014-1.7946 11.684-4.5021 17.7569-8.9619C70.6551 45.5182 70.6887 45.459 70.6943 45.3942 72.1747 30.0791 68.2147 16.7757 60.1968 4.9823 60.1772 4.9429 60.1437 4.9147 60.1045 4.8978zM23.7259 37.3253c-3.4983.0-6.3808-3.2117-6.3808-7.156s2.8266-7.156 6.3808-7.156c3.5821.0 6.4367 3.2399 6.3807 7.156.0 3.9443-2.8266 7.156-6.3807 7.156zm23.5919.0c-3.4982.0-6.3807-3.2117-6.3807-7.156s2.8265-7.156 6.3807-7.156c3.5822.0 6.4367 3.2399 6.3808 7.156.0 3.9443-2.7986 7.156-6.3808 7.156z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon"><path fill="#fff" d="m15.054695 9.8859583c-.22611 1.1632697-2.02517 2.4363497-4.09138 2.6830797-1.0774504.12856-2.1382704.24673-3.2694704.19484-1.84996-.0848-3.30971-.44157-3.30971-.44157.0.1801.0111.35157.0333.51194.24051 1.82571 1.81034 1.93508 3.29737 1.98607 1.50088.0514 2.8373104-.37004 2.8373104-.37004l.0617 1.35686s-1.0498104.56374-2.9199404.66742c-1.03124.0567-2.3117-.0259-3.80308-.42069-3.23454998-.85613-3.79081998-4.304-3.87592998-7.8024197-.026-1.03871-.01-2.01815-.01-2.83732.0-3.57732 2.34385998-4.62587996 2.34385998-4.62587996 1.18184-.54277 3.20976-.77101 5.318-.7882499985409h.0518C9.8267646.01719834 11.856025.24547834 13.037775.78824834c0 0 2.34377 1.04855996 2.34377 4.62587996.0.0.0294 2.63937-.32687 4.47183"/><path fill="#000" d="m12.616925 5.6916583v4.3315297h-1.71607V5.8189683c0-.88624-.37289-1.33607-1.1187604-1.33607-.82467.0-1.23799.53361-1.23799 1.58875v2.30122h-1.70594v-2.30122c0-1.05514-.4134-1.58875-1.23808-1.58875-.74587.0-1.11876.44983-1.11876 1.33607v4.2042197h-1.71607V5.6916583c0-.88527.22541-1.58876.67817-2.10922.46689-.52047 1.07833-.78727 1.83735-.78727.87816.0 1.54317.33752 1.98288 1.01267l.42744.71655.42753-.71655c.43961-.67515 1.10463-1.01267 1.9828704-1.01267.75893.0 1.37037.2668 1.83735.78727.45268.52046.67808 1.22395.67808 2.10922"/></symbol></svg>
<footer class=footer>
<div class="footer_inner wrap pale">
<img src=https://s-show.github.io/img/favicon.png class="icon icon_2 transparent" alt="s-show 閑古鳥ブログ">
<p>Copyright&nbsp;2016-&nbsp;<span class=year></span>&nbsp;S-SHOW 閑古鳥ブログ. All Rights Reserved</p><a class=to_top href=#documentTop><svg class="icon"><title>to-top</title><use xlink:href="#to-top"/></svg>
</a>
</div>
</footer>
<script type=text/javascript src=https://s-show.github.io/ja/js/bundle.d0b45df9003a90ac496ba5c60bb004ce71c51b977205c5b8bbc612d21311381a8c51acc9308976c39690ce978c106a4752f4381a0cec7bcf64bacc1fae36d306.js integrity="sha512-0LRd+QA6kKxJa6XGC7AEznHFG5dyBcW4u8YS0hMROBqMUazJMIl2w5aQzpeMEGpHUvQ4Ggzse89kuswfrjbTBg==" crossorigin=anonymous></script>
<script src=https://s-show.github.io/js/search.min.1b1254eb041cd756fc95f3091f63cf5363e45e881aa13c3da952b68cc085c07a9b960212f522e01621a0ed9538eac9b94e346edf62f0585f8aef843f42343a9e.js></script>
</body>
</html>