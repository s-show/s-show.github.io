<!doctype html><html class=position-relative itemscope itemtype=http://schema.org/WebPage lang=ja data-bs-theme=dark data-palette=indigo>
<head><script src=https://kankodori-blog.com/assets/init/bundle.min.e8642c679f6e35c2643ff3e0c61010754f6d9d43be0a9bd775ffbf73cfc18cf6.js integrity="sha256-6GQsZ59uNcJkP/PgxhAQdU9tnUO+CpvXdf+/c8/BjPY=" crossorigin=anonymous></script>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>OS のキーボード配列が JIS キーボードの時の QMK Firmware の設定について - 閑古鳥ブログ</title>
<link rel=icon href=https://kankodori-blog.com/favicon_hua92e68620dc14ab881fcc925a25f9ebe_100305_16x16_resize_box_3.png sizes=16x16 type=image/png>
<link rel=icon href=https://kankodori-blog.com/favicon_hua92e68620dc14ab881fcc925a25f9ebe_100305_32x32_resize_box_3.png sizes=32x32 type=image/png>
<link rel=apple-touch-icon href=https://kankodori-blog.com/favicon_hua92e68620dc14ab881fcc925a25f9ebe_100305_180x180_resize_box_3.png sizes=180x180 type=image/png>
<link rel=icon href=https://kankodori-blog.com/favicon_hua92e68620dc14ab881fcc925a25f9ebe_100305_150x150_resize_box_3.png sizes=150x150 type=image/png>
<link rel=icon href=https://kankodori-blog.com/favicon_hua92e68620dc14ab881fcc925a25f9ebe_100305_192x192_resize_box_3.png sizes=192x192 type=image/png>
<link rel=mask-icon href=https://kankodori-blog.com/safari-pinned-tab.svg color=#6f42c1><link rel=icon href="https://kankodori-blog.com/images/icons/favicon.ico?version=df8a527f682d3faeeb649c404764f4e8">
<meta name=keywords content>
<meta name=description content="前置き# QMK Firmware は US 配列を前提にしたファームウェアなので、OS のキーボード配列を US キーボードにして US キーキャップを使う場合は、言語関係の問題は生">
<meta name=robots content="index, follow"><meta name=twitter:card content="summary">
<meta name=twitter:title content="OS のキーボード配列が JIS キーボードの時の QMK Firmware の設定について">
<meta name=twitter:description content="前置き# QMK Firmware は US 配列を前提にしたファームウェアなので、OS のキーボード配列を US キーボードにして US キーキャップを使う場合は、言語関係の問題は生">
<meta name=twitter:site content="@s_show_0000">
<meta property="og:title" content="OS のキーボード配列が JIS キーボードの時の QMK Firmware の設定について">
<meta property="og:description" content="前置き# QMK Firmware は US 配列を前提にしたファームウェアなので、OS のキーボード配列を US キーボードにして US キーキャップを使う場合は、言語関係の問題は生">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kankodori-blog.com/posts/2022-08-07/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-08-07T00:00:00+09:00">
<meta property="article:modified_time" content="2022-08-07T00:00:00+09:00">
<meta itemprop=name content="OS のキーボード配列が JIS キーボードの時の QMK Firmware の設定について">
<meta itemprop=description content="前置き# QMK Firmware は US 配列を前提にしたファームウェアなので、OS のキーボード配列を US キーボードにして US キーキャップを使う場合は、言語関係の問題は生"><meta itemprop=datePublished content="2022-08-07T00:00:00+09:00">
<meta itemprop=dateModified content="2022-08-07T00:00:00+09:00">
<meta itemprop=wordCount content="3572">
<meta itemprop=keywords content>
<meta property="og:image" content="https://kankodori-blog.com/images/logo.webp">
<meta name=twitter:image content="https://kankodori-blog.com/images/logo.webp">
<link data-precache rel=stylesheet href="https://kankodori-blog.com/assets/main/bundle.min.1cf40b4f892e02af140ba04bf2d5fc41fbaac32b68862d822b83281ba2b8afc4.css" integrity="sha256-HPQLT4kuAq8UC6BL8tX8Qfuqwytohi2CK4MoG6K4r8Q=" crossorigin=anonymous>
<link data-precache rel=stylesheet href=https://kankodori-blog.com/assets/viewer/bundle.min.6d0fc65b8b058ac563091dc5c36f61afba5dd705058680aa24f1d5a3bcf0064d.css integrity="sha256-bQ/GW4sFisVjCR3Fw29hr7pd1wUFhoCqJPHVo7zwBk0=" crossorigin=anonymous>
</head>
<body><header>
<nav class="top-app-bar shadow navbar navbar-expand-lg fixed-top">
<div class=container>
<a class="navbar-brand d-flex align-items-center flex-grow-1 flex-lg-grow-0 text-lg-start ms-2 ms-lg-0 mx-auto me-lg-2" href=https://kankodori-blog.com/>
<picture><img class=logo alt=Logo src=https://kankodori-blog.com/images/logo.webp loading=lazy width=1024 height=1024>
</picture>閑古鳥ブログ
</a>
<button class="navbar-toggler order-5" type=button data-bs-toggle=offcanvas data-bs-target=#navbarMenus aria-controls=navbarMenus aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-ellipsis-h"></i>
</button>
<div class="offcanvas-lg offcanvas-end flex-grow-1" data-bs-scroll=true tabindex=-1 id=navbarMenus aria-labelledby=navbarMenusLabel>
<div class="offcanvas-header px-4 pb-0">
<h5 class=offcanvas-title id=navbarMenusLabel>閑古鳥ブログ</h5>
<button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas data-bs-target=#navbarMenus aria-label=Close></button>
</div>
<div class="offcanvas-body p-4 pt-0 p-lg-0">
<hr class=d-lg-none>
<ul class="navbar-nav flex-row flex-wrap align-items-center me-auto">
</ul>
<hr class=d-lg-none>
<form class="search-bar ms-auto my-1" action=https://kankodori-blog.com/search/ novalidate>
<div class="input-group input-group-sm align-items-center">
<span class="btn btn-search disabled position-absolute left-0 border-0">
<i class="fas fa-fw fa-search fa-lg"></i>
</span>
<input class="py-2 form-control rounded search-input" name=q type=search aria-label=Search required>
</div>
</form><hr class=d-lg-none>
<ul class="navbar-nav flex-row flex-wrap align-items-center ms-md-auto">
<li class="nav-item dropdown col-6 col-lg-auto">
<a class="nav-link px-0 py-2 px-lg-1" href=# id=fontSizeDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
<i class="fas fa-fw fa-font"></i>
<span class=d-lg-none>フォントサイズ</span>
</a>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby=fontSizeDropdown>
<li>
<button class="font-size-item dropdown-item" data-size=xs>
極小
</button>
</li>
<li>
<button class="font-size-item dropdown-item" data-size=sm>
小
</button>
</li>
<li>
<button class="font-size-item dropdown-item active" data-size=md>
標準
</button>
</li>
<li>
<button class="font-size-item dropdown-item" data-size=lg>
大
</button>
</li>
<li>
<button class="font-size-item dropdown-item" data-size=xl>
特大
</button>
</li>
</ul>
</li>
<li class="nav-item dropdown col-6 col-lg-auto">
<a class="nav-link px-0 py-2 px-lg-1" href=# id=paletteDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
<i class="fas fa-fw fa-palette"></i>
<span class=d-lg-none>パレット</span>
</a>
<ul class="dropdown-menu dropdown-menu-end px-2" aria-labelledby=paletteDropdown>
<div class=row>
<li class="col-4 my-1">
<a role=button id=palette-blue aria-label=Blue class="btn btn-sm w-100 palette text-bg-blue" data-palette=blue>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-blue-gray aria-label="Blue Gray" class="btn btn-sm w-100 palette text-bg-blue-gray" data-palette=blue-gray>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-brown aria-label=Brown class="btn btn-sm w-100 palette text-bg-brown" data-palette=brown>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-cyan aria-label=Cyan class="btn btn-sm w-100 palette text-bg-cyan" data-palette=cyan>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-green aria-label=Green class="btn btn-sm w-100 palette text-bg-green" data-palette=green>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-indigo aria-label=Indigo class="btn btn-sm w-100 palette text-bg-indigo" data-palette=indigo>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-orange aria-label=Orange class="btn btn-sm w-100 palette text-bg-orange" data-palette=orange>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-pink aria-label=Pink class="btn btn-sm w-100 palette text-bg-pink" data-palette=pink>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-purple aria-label=Purple class="btn btn-sm w-100 palette text-bg-purple" data-palette=purple>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-red aria-label=Red class="btn btn-sm w-100 palette text-bg-red" data-palette=red>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-teal aria-label=Teal class="btn btn-sm w-100 palette text-bg-teal" data-palette=teal>
</a>
</li>
<li class="col-4 my-1">
<a role=button id=palette-yellow aria-label=Yellow class="btn btn-sm w-100 palette text-bg-yellow" data-palette=yellow>
</a>
</li>
</div>
</ul>
</li>
<li class="nav-item dropdown col-6 col-lg-auto">
<a class="nav-link px-0 py-2 px-lg-1" href=# id=modeDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
<i class="mode-icon fas fa-fw fa-moon" id=modeIcon></i>
<span class=d-lg-none>表示モード</span>
</a>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby=modeDropdown>
<li class=mode-item data-color-mode=light data-icon=sun>
<button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-sun"></i> Light
</button>
</li>
<li class="mode-item active" data-color-mode=dark data-icon=moon>
<button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-moon"></i> Dark
</button>
</li>
<li class=mode-item data-color-mode=auto data-icon=adjust>
<button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-adjust"></i> Auto
</button>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</nav>
</header>
<main class=container>
<div class="row content"><noscript>
<div class="alert alert-danger" role=alert>あなたのブラウザはJavascriptをサポートしていません。</div>
</noscript>
<aside class="col-lg-4 sidebar d-flex order-lg-5">
<div class="container d-flex flex-column">
<div class="accordion profile">
<div class="accordion-item card row text-center component">
<div class="accordion-header card-header border-0" id=profile-header>
<a class="accordion-button d-lg-none mb-2 collapsed shadow-none p-0 bg-transparent text-surface" type=button data-bs-toggle=collapse data-bs-target=#profile aria-expanded=false aria-controls=profile>
プロフィール
</a>
</div>
<div class="card-body collapse accordion-collapse accordion-body d-lg-block" id=profile aria-labelledby=profile-header>
<div class="col-12 d-flex align-items-center justify-content-center"><picture><img class="profile-avatar rounded-circle" alt=s-show src=https://kankodori-blog.com/img/profileIcon.png loading=lazy data-viewer-invisible width=500 height=500>
</picture></div>
<div class="col-12 profile-meta"><div class="profile-name fw-fold fs-lg">s-show</div><div class=profile-bio>プログラミングや3Dプリンタやキーボードなどが好きな平凡な公務員</div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i>Japan</div><div class="profile-about text-primary"><i class="fas fa-fw fa-user"></i><a href=https://kankodori-blog.com/about/>About</a></div><div class="profile-contact text-primary"><i class="fas fa-fw fa-question-circle"></i><a href=https://kankodori-blog.com/contact/>Contact Us</a></div></div>
<nav class="social-links nav justify-content-center mt-1 justify-content-around">
<a class="nav-link social-link" href=mailto:kankodori.blog@gmail.com title=Email>
<i class="fas fa-fw fa-2x fa-envelope"></i>
</a>
<a class="nav-link social-link" target=_blank href=https://github.com/s-show title=GitHub rel="noopener noreferrer">
<i class="fa-fw fa-2x fab fa-github"></i>
</a>
<a class="nav-link social-link" target=_blank href=https://twitter.com/s_show_0000 title=Twitter rel="noopener noreferrer">
<i class="fa-fw fa-2x fab fa-twitter"></i>
</a>
<a class="nav-link social-link" target=_blank href=https://kankodori-blog.com/index.xml title=RSS rel="noopener noreferrer">
<i class="fas fa-fw fa-2x fa-rss"></i>
</a>
</nav>
</div>
</div>
</div>
<div class="accordion taxonomies-toggle">
<section class="row card component accordion-item">
<div class="accordion-header card-header border-0">
<a class="accordion-button d-lg-none mb-1 collapsed shadow-none p-0 bg-transparent" type=button data-bs-toggle=collapse data-bs-target=#taxonomies-toggle aria-expanded=false aria-controls=taxonomies-toggle>
分類
</a>
</div>
<div class="card-body collapse accordion-collapse accordion-body d-lg-block" id=taxonomies-toggle>
<ul class="nav nav-pills nav-fill" id=myTab role=tablist>
<li class=nav-item role=presentation>
<button class="nav-link active" id=taxonomyTagsTab data-bs-toggle=tab data-bs-target=#taxonomyTags type=button role=tab aria-controls=タグ aria-selected=true>
タグ
</button>
</li>
<li class=nav-item role=presentation>
<button class=nav-link id=taxonomyArchivesTab data-bs-toggle=tab data-bs-target=#taxonomyArchive type=button role=tab aria-controls=taxonomyArchives aria-selected=true>
アーカイブ
</button>
</li>
</ul>
<div class="tab-content mt-3">
<div class="tab-pane active" id=taxonomyTags role=tabpanel aria-labelledby=taxonomyTagsTab tabindex=0>
<a href=https://kankodori-blog.com/tags/%E5%82%99%E5%BF%98%E9%8C%B2/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=備忘録>
備忘録
<span class="badge badge-sm text-secondary bg-white ms-1">22</span>
</a>
<a href=https://kankodori-blog.com/tags/3d%E3%83%97%E3%83%AA%E3%83%B3%E3%82%BF/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=3Dプリンタ>
3Dプリンタ
<span class="badge badge-sm text-secondary bg-white ms-1">15</span>
</a>
<a href=https://kankodori-blog.com/tags/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=プログラミング>
プログラミング
<span class="badge badge-sm text-secondary bg-white ms-1">8</span>
</a>
<a href=https://kankodori-blog.com/tags/%E8%87%AA%E4%BD%9C%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=自作キーボード>
自作キーボード
<span class="badge badge-sm text-secondary bg-white ms-1">6</span>
</a>
<a href=https://kankodori-blog.com/tags/klipper/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Klipper>
Klipper
<span class="badge badge-sm text-secondary bg-white ms-1">4</span>
</a>
<a href=https://kankodori-blog.com/tags/%E8%AA%AD%E6%9B%B8%E8%A8%98%E9%8C%B2/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=読書記録>
読書記録
<span class="badge badge-sm text-secondary bg-white ms-1">3</span>
</a>
<a href=https://kankodori-blog.com/tags/mac/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Mac>
Mac
<span class="badge badge-sm text-secondary bg-white ms-1">2</span>
</a>
<a href=https://kankodori-blog.com/tags/mainsail/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Mainsail>
Mainsail
<span class="badge badge-sm text-secondary bg-white ms-1">2</span>
</a>
<a href=https://kankodori-blog.com/tags/%E6%9C%AA%E5%88%86%E9%A1%9E/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=未分類>
未分類
<span class="badge badge-sm text-secondary bg-white ms-1">2</span>
</a>
<a href=https://kankodori-blog.com/tags/chatgpt/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=ChatGPT>
ChatGPT
<span class="badge badge-sm text-secondary bg-white ms-1">1</span>
</a>
<a href=https://kankodori-blog.com/tags class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=全部>
全部
<span class="badge badge-sm text-secondary bg-white ms-1">17</span>
</a>
</div>
<div class=tab-pane id=taxonomyArchive role=tabpanel aria-labelledby=taxonomyArchiveTab tabindex=0>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2023>
2023 <span class="badge badge-sm text-secondary bg-white ms-1">8</span>
</a>
<a href=https://kankodori-blog.com/archives/2022/ class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2022>
2022 <span class="badge badge-sm text-secondary bg-white ms-1">18</span>
</a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2021>
2021 <span class="badge badge-sm text-secondary bg-white ms-1">3</span>
</a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2020>
2020 <span class="badge badge-sm text-secondary bg-white ms-1">2</span>
</a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2019>
2019 <span class="badge badge-sm text-secondary bg-white ms-1">4</span>
</a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2018>
2018 <span class="badge badge-sm text-secondary bg-white ms-1">2</span>
</a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2017>
2017 <span class="badge badge-sm text-secondary bg-white ms-1">3</span>
</a>
</div>
</div>
</div>
</section>
</div>
<div class="accordion posts-toggle">
<section class="row card component accordion-item">
<div class="accordion-header card-header border-0">
<a class="accordion-button d-lg-none mb-1 collapsed shadow-none p-0 bg-transparent" type=button data-bs-toggle=collapse data-bs-target=#posts-toggle aria-expanded=false aria-controls=posts-toggle>
投稿
</a>
</div>
<div class="card-body collapse accordion-collapse accordion-body d-lg-block" id=posts-toggle>
<ul class="nav nav-pills nav-fill" id=myTab role=tablist>
<li class=nav-item role=presentation>
<button class="nav-link active" id=recent-posts-tab data-bs-toggle=tab data-bs-target=#recent-posts type=button role=tab aria-controls=recent-posts aria-selected=true>
最近の投稿
</button>
</li>
</ul>
<div class="tab-content mt-3">
<div class="tab-pane active" id=recent-posts role=tabpanel aria-labelledby=recent-posts-tab tabindex=0>
<ul class="post-list list-unstyled ms-1">
<li class=mb-2>
<div class=d-flex>
<div class="flex-grow-1 d-flex flex-column h-auto justify-content-center">
<a class=post-title href=https://kankodori-blog.com/posts/2023-10-07/>leaflet 覚書</a>
<div class="post-meta mt-2">
<span class=post-date>2023-10-07</span>
</div>
</div>
</div>
</li>
<li class=mb-2>
<div class=d-flex>
<div class="flex-grow-1 d-flex flex-column h-auto justify-content-center">
<a class=post-title href=https://kankodori-blog.com/posts/2023-05-28/>Whisper を Windows ローカルで使うための作業</a>
<div class="post-meta mt-2">
<span class=post-date>2023-05-28</span>
</div>
</div>
</div>
</li>
<li class=mb-2>
<div class=d-flex>
<div class="flex-grow-1 d-flex flex-column h-auto justify-content-center">
<a class=post-title href=https://kankodori-blog.com/posts/2023-04-30/>特定のプリンタの設定だけを有効化した SuperSlicer を起動する方法</a>
<div class="post-meta mt-2">
<span class=post-date>2023-04-29</span>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</section>
</div>
</div>
</aside>
<div class=col-lg-8>
<div class=container><nav class="row card component" aria-label=breadcrumb>
<div class="card-body pb-0">
<ol class=breadcrumb><li class="breadcrumb-item text-surface"><a href=https://kankodori-blog.com/>ホーム</a></li><li class="breadcrumb-item text-surface"><a href=https://kankodori-blog.com/posts/>Posts</a></li><li class="breadcrumb-item active">OS のキーボード配列が JIS キーボードの時の QMK Firmware の設定について</li></ol>
</div>
</nav><div class="post-panel-wrapper position-sticky">
<div class="d-flex flex-column component rounded post-panel position-absolute border">
<a class="action action-panel-toggler" role=button title="Panel toggler">
<i class="fas fa-fw fa-chevron-circle-down"></i>
</a>
<a id=sidebarToggler class="action d-none d-lg-block" role=button title="Sidebar toggler">
<i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i>
</a>
<a class=action href=#post-copyright role=button aria-label=Copyright title=Copyright>
<i class="fas fa-fw fa-copyright"></i>
</a>
<a class=action href=#post-comments role=button aria-label=Comments title=Comments>
<i class="fas fa-fw fa-comments"></i>
</a>
</div>
</div><article class="row card component mb-4 post">
<div class=card-header>
<h1 class="card-title post-title my-2">OS のキーボード配列が JIS キーボードの時の QMK Firmware の設定について</h1>
</div>
<div class=card-body><div class="post-meta mb-3">
<span class="post-date me-1 mb-1" title="公開: 2022-08-06 15:00:00 +0000 UTC.">2022-08-07</span>
</div>
<div class="post-content mb-3" data-bs-spy=scroll data-bs-target=#TableOfContents tabindex=0><h2 id=前置き data-numberify>前置き<a class="anchor ms-1 d-none" href=#前置き>#</a></h2>
<p>QMK Firmware は US 配列を前提にしたファームウェアなので、OS のキーボード配列を US キーボードにして US キーキャップを使う場合は、言語関係の問題は生じません。</p>
<p>しかし、OS のキーボード配列を JIS キーボードに設定すると、途端に言語関係の問題が生じます。対応方法は、US キーキャップを使う場合と JIS キーキャップを使う場合でそれぞれ違いますので、それぞれのパターンについて紹介したいと思います。</p>
<h2 id=tldl data-numberify>tl,dl<a class="anchor ms-1 d-none" href=#tldl>#</a></h2>
<dl>
<dt>JIS キーキャップを使う場合</dt>
<dd><a href=https://github.com/qmk/qmk_firmware/blob/master/quantum/keymap_extras/keymap_japanese.h target=_blank rel="noopener noreferrer">qmk_firmware/keymap_japanese.h at master · qmk/qmk_firmware<i class="fas fa-external-link-square-alt ms-1"></i></a> を <code>keymap.c</code> の先頭で <code>#include"keymap_jp.h"</code> して読み込んだ上で、<code>KC_*</code> の代わりに <code>JP_*</code> キーを使います。</dd>
<dt>US キーキャップを使う場合</dt>
<dd>この場合の方法は、次の2つです。</dd>
</dl>
<h3 id=方法1 data-numberify>方法1<a class="anchor ms-1 d-none" href=#方法1>#</a></h3>
<p><a href=https://github.com/koktoh/jtu_custom_keycodes target=_blank rel="noopener noreferrer">koktoh/jtu_custom_keycodes: Keycodes to use jis keycode in us keymap<i class="fas fa-external-link-square-alt ms-1"></i></a> を使い、個別に対応が必要なキーを <code>JU_*</code> キーに置き換えます。<br>ただし、<code>!</code> や <code>(</code> のように Shift キーを押しながら入力する記号類を直接入力する場合（例えば、Raise レイヤーで <code>Q</code> を押したら <code>!</code> が入力されるといったものです。）、<a href=https://github.com/qmk/qmk_firmware/blob/master/quantum/keymap_extras/keymap_japanese.h target=_blank rel="noopener noreferrer">qmk_firmware/keymap_japanese.h at master · qmk/qmk_firmware<i class="fas fa-external-link-square-alt ms-1"></i></a> を使って <code>JP_EXLM</code> 等の形で指定する必要があります。<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p>
<h3 id=方法2 data-numberify>方法2<a class="anchor ms-1 d-none" href=#方法2>#</a></h3>
<p>Version 0.14.0 で導入された Key Overrides 機能と <code>JP_*</code> キー を組み合わせてキーの挙動を変更するという方法です。</p>
<p><a href=https://docs.qmk.fm/#/ChangeLog/20210828 target=_blank rel="noopener noreferrer">QMK Breaking Changes - 2021 August 28 Changelog<i class="fas fa-external-link-square-alt ms-1"></i></a></p>
<p>一見すると回りくどい方法ですが、<code>JU_*</code> キーはキーリピートが効かないのに対し、この方法で設定したキーはキーリピートが効きますので、普通のキーの挙動に可能な限り近づけることができます。</p>
<h2 id=解説 data-numberify>解説<a class="anchor ms-1 d-none" href=#解説>#</a></h2>
<h3 id=追加ライブラリまたは設定が必要な理由 data-numberify>追加ライブラリまたは設定が必要な理由<a class="anchor ms-1 d-none" href=#追加ライブラリまたは設定が必要な理由>#</a></h3>
<p><code>keymap.c</code> で <code>KC_A</code> と指定したキーをタイプした時、キーボードから PC に送信されるデータは <code>A</code> という文字に応じたキーコードです。そして、OS は受け取ったキーコードに応じた文字をアプリケーションに渡します。<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p>
<p>問題は、このキーコードと文字の対応関係が言語によって異なっており、例えば、<code>[</code> に当たる <code>KC_LBRC</code> のキーコードを送信しても、OS のキーボード配列が JIS になっていると OSは <code>=</code> を返してしまいます。</p>
<p>このような取り違えが生じるキーがいくつかありますので、OS のキーボード配列を JIS にした状態でキーキャップの印字通りに入力したい場合、何らかの変換処理が必要となります。</p>
<p>上記で紹介した <a href=https://github.com/qmk/qmk_firmware/blob/master/quantum/keymap_extras/keymap_japanese.h target=_blank rel="noopener noreferrer">qmk_firmware/keymap_japanese.h at master · qmk/qmk_firmware<i class="fas fa-external-link-square-alt ms-1"></i></a> と <a href=https://github.com/koktoh/jtu_custom_keycodes target=_blank rel="noopener noreferrer">koktoh/jtu_custom_keycodes: Keycodes to use jis keycode in us keymap<i class="fas fa-external-link-square-alt ms-1"></i></a> を使う方法は、ライブラリに変換処理を任せる方法で、Key Overrides を使う方法は自力で変換処理を行うという方法です。</p>
<h2 id=実装 data-numberify>実装<a class="anchor ms-1 d-none" href=#実装>#</a></h2>
<p>ここからは具体的な実装を紹介していきます。なお、OS のキーボード配列が JIS 配列になっていることが前提です。</p>
<h3 id=jis-キーキャップを使う場合 data-numberify>JIS キーキャップを使う場合<a class="anchor ms-1 d-none" href=#jis-キーキャップを使う場合>#</a></h3>
<p><a href=https://github.com/qmk/qmk_firmware/blob/master/quantum/keymap_extras/keymap_japanese.h target=_blank rel="noopener noreferrer">qmk_firmware/keymap_japanese.h at master · qmk/qmk_firmware<i class="fas fa-external-link-square-alt ms-1"></i></a> を <code>keymap.c</code> の先頭で <code>#include"keymap_jp.h"</code> して読み込んで、<code>KC_*</code> の代わりに <code>JP_*</code> キーを使います。</p>
<p>以下のキーマップは、OS のキーボード配列とキーキャップを JIS にする前提で設計された <a href=https://salicylic-acid3.hatenablog.com/entry/jisplit89-build-guide target=_blank rel="noopener noreferrer">自作キーボードキット『JISplit89』ビルドガイド - 自作キーボード温泉街の歩き方<i class="fas fa-external-link-square-alt ms-1"></i></a> のデフォルトキーマップですが、JIS キーキャップ独自のキー（下の図の赤枠のキー）のキーコードに <code>JP_*</code> キーコードを指定しています。</p>
<figure class="figure bsimage">
<img src=image1.jpg class="figure-img img-fluid rounded">
<figcaption class="figure-caption fw-light text-center">
<a href=https://github.com/qmk/qmk_firmware/tree/master/keyboards/salicylic_acid3/jisplit89>qmk_firmware/keyboards/salicylic_acid3/jisplit89 at master · qmk/qmk_firmware </a>より
</figcaption>
</figure>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-keymap.c data-lang=keymap.c><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1> 1</a></span><span class=p>[</span><span class=n>_QWERTY</span><span class=p>]</span> <span class=o>=</span> <span class=n>LAYOUT</span><span class=p>(</span>
<span class=ln id=2><a style=outline:none;text-decoration:none;color:inherit href=#2> 2</a></span>   <span class=c1>//,-----------------------------------------------------|   |--------------------------------------------------------------------------------.
</span><span class=ln id=3><a style=outline:none;text-decoration:none;color:inherit href=#3> 3</a></span><span class=c1></span>        <span class=n>KC_ESC</span><span class=p>,</span>   <span class=n>KC_F1</span><span class=p>,</span>   <span class=n>KC_F2</span><span class=p>,</span>   <span class=n>KC_F3</span><span class=p>,</span>   <span class=n>KC_F4</span><span class=p>,</span>   <span class=n>KC_F5</span><span class=p>,</span>       <span class=n>KC_F6</span><span class=p>,</span>   <span class=n>KC_F7</span><span class=p>,</span>   <span class=n>KC_F8</span><span class=p>,</span>   <span class=n>KC_F9</span><span class=p>,</span>  <span class=n>KC_F10</span><span class=p>,</span>  <span class=n>KC_F11</span><span class=p>,</span>  <span class=n>KC_F12</span><span class=p>,</span>  <span class=n>KC_INS</span><span class=p>,</span> <span class=n>KC_PSCR</span><span class=p>,</span>
<span class=ln id=4><a style=outline:none;text-decoration:none;color:inherit href=#4> 4</a></span>   <span class=c1>//|--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------+--------+--------|
</span><span class=ln id=5><a style=outline:none;text-decoration:none;color:inherit href=#5> 5</a></span><span class=c1></span> <span class=n>LT</span><span class=p>(</span><span class=n>_ADJUST</span><span class=p>,</span><span class=n>KC_ZKHK</span><span class=p>),</span><span class=n>KC_1</span><span class=p>,</span>  <span class=n>KC_2</span><span class=p>,</span>    <span class=n>KC_3</span><span class=p>,</span>    <span class=n>KC_4</span><span class=p>,</span>    <span class=n>KC_5</span><span class=p>,</span>        <span class=n>KC_6</span><span class=p>,</span>    <span class=n>KC_7</span><span class=p>,</span>    <span class=n>KC_8</span><span class=p>,</span>    <span class=n>KC_9</span><span class=p>,</span>    <span class=n>KC_0</span><span class=p>,</span> <span class=n>JP_MINS</span><span class=p>,</span> <span class=n>JP_CIRC</span><span class=p>,</span>  <span class=n>JP_YEN</span><span class=p>,</span> <span class=n>KC_BSPC</span><span class=p>,</span>  <span class=n>KC_DEL</span><span class=p>,</span>
<span class=ln id=6><a style=outline:none;text-decoration:none;color:inherit href=#6> 6</a></span>   <span class=c1>//|--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------+--------+--------|
</span><span class=ln id=7><a style=outline:none;text-decoration:none;color:inherit href=#7> 7</a></span><span class=c1></span>        <span class=n>KC_TAB</span><span class=p>,</span>    <span class=n>KC_Q</span><span class=p>,</span>    <span class=n>KC_W</span><span class=p>,</span>    <span class=n>KC_E</span><span class=p>,</span>    <span class=n>KC_R</span><span class=p>,</span>    <span class=n>KC_T</span><span class=p>,</span>        <span class=n>KC_Y</span><span class=p>,</span>    <span class=n>KC_U</span><span class=p>,</span>    <span class=n>KC_I</span><span class=p>,</span>    <span class=n>KC_O</span><span class=p>,</span>    <span class=n>KC_P</span><span class=p>,</span>   <span class=n>JP_AT</span><span class=p>,</span> <span class=n>JP_LBRC</span><span class=p>,</span>  <span class=n>KC_ENT</span><span class=p>,</span> <span class=n>KC_HOME</span><span class=p>,</span>
<span class=ln id=8><a style=outline:none;text-decoration:none;color:inherit href=#8> 8</a></span>   <span class=c1>//|--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------+--------+--------|
</span><span class=ln id=9><a style=outline:none;text-decoration:none;color:inherit href=#9> 9</a></span><span class=c1></span>       <span class=n>KC_CAPS</span><span class=p>,</span>    <span class=n>KC_A</span><span class=p>,</span>    <span class=n>KC_S</span><span class=p>,</span>    <span class=n>KC_D</span><span class=p>,</span>    <span class=n>KC_F</span><span class=p>,</span>    <span class=n>KC_G</span><span class=p>,</span>        <span class=n>KC_H</span><span class=p>,</span>    <span class=n>KC_J</span><span class=p>,</span>    <span class=n>KC_K</span><span class=p>,</span>    <span class=n>KC_L</span><span class=p>,</span> <span class=n>JP_SCLN</span><span class=p>,</span> <span class=n>JP_COLN</span><span class=p>,</span> <span class=n>JP_RBRC</span><span class=p>,</span>           <span class=n>KC_END</span><span class=p>,</span>
<span class=ln id=10><a style=outline:none;text-decoration:none;color:inherit href=#10>10</a></span>   <span class=c1>//|--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------+--------+--------|
</span><span class=ln id=11><a style=outline:none;text-decoration:none;color:inherit href=#11>11</a></span><span class=c1></span>       <span class=n>KC_LSFT</span><span class=p>,</span>    <span class=n>KC_Z</span><span class=p>,</span>    <span class=n>KC_X</span><span class=p>,</span>    <span class=n>KC_C</span><span class=p>,</span>    <span class=n>KC_V</span><span class=p>,</span>    <span class=n>KC_B</span><span class=p>,</span>        <span class=n>KC_N</span><span class=p>,</span>    <span class=n>KC_M</span><span class=p>,</span> <span class=n>KC_COMM</span><span class=p>,</span>  <span class=n>KC_DOT</span><span class=p>,</span> <span class=n>KC_SLSH</span><span class=p>,</span> <span class=n>JP_BSLS</span><span class=p>,</span> <span class=n>KC_PGDN</span><span class=p>,</span>   <span class=n>KC_UP</span><span class=p>,</span> <span class=n>KC_PGUP</span><span class=p>,</span>
<span class=ln id=12><a style=outline:none;text-decoration:none;color:inherit href=#12>12</a></span>   <span class=c1>//|--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------+--------+--------|
</span><span class=ln id=13><a style=outline:none;text-decoration:none;color:inherit href=#13>13</a></span><span class=c1></span>      <span class=n>KC_LCTRL</span><span class=p>,</span> <span class=n>KC_LGUI</span><span class=p>,</span> <span class=n>KC_LALT</span><span class=p>,</span> <span class=n>KC_MHEN</span><span class=p>,</span>  <span class=n>KC_SPC</span><span class=p>,</span>  <span class=n>KC_SPC</span><span class=p>,</span>      <span class=n>KC_SPC</span><span class=p>,</span>  <span class=n>KC_SPC</span><span class=p>,</span> <span class=n>KC_HENK</span><span class=p>,</span> <span class=n>KC_KANA</span><span class=p>,</span>  <span class=n>KC_APP</span><span class=p>,</span>          <span class=n>KC_LEFT</span><span class=p>,</span> <span class=n>KC_DOWN</span><span class=p>,</span><span class=n>KC_RIGHT</span>
<span class=ln id=14><a style=outline:none;text-decoration:none;color:inherit href=#14>14</a></span>   <span class=c1>//`-----------------------------------------------------|   |--------------------------------------------------------------------------------&#39;
</span><span class=ln id=15><a style=outline:none;text-decoration:none;color:inherit href=#15>15</a></span><span class=c1></span><span class=p>),</span>
</code></pre></div><p>このように、JIS キーキャップと US キーキャップで印字が異なるキーについて、<code>JP_*</code> キーコードを使用して違いを吸収しています。</p>
<h3 id=us-キーキャップを使う場合 data-numberify>US キーキャップを使う場合<a class="anchor ms-1 d-none" href=#us-キーキャップを使う場合>#</a></h3>
<h4 id=ju_-を使う場合 data-numberify>JU_* を使う場合<a class="anchor ms-1 d-none" href=#ju_-を使う場合>#</a></h4>
<p><a href=https://github.com/koktoh/jtu_custom_keycodes target=_blank rel="noopener noreferrer">koktoh/jtu_custom_keycodes: Keycodes to use jis keycode in us keymap<i class="fas fa-external-link-square-alt ms-1"></i></a> を使い、<code>;</code> や <code>'</code> のように Shift キーを使わなくてもキーキャップの印字通りに入力されないキーや、Shift キーを使った場合に印字通りに入力されない <code>2</code> や <code>6</code> について、<code>JU_*</code> キーを使って違いを吸収しています。</p>
<figure class="figure bsimage">
<img src=image2.png class="figure-img img-fluid rounded">
<figcaption class="figure-caption fw-light text-center">
<a href="http://www.keyboard-layout-editor.com/##@_name=JIS%E9%85%8D%E5%88%97%E3%81%A8US%E9%85%8D%E5%88%97%E3%81%AE%E6%AF%94%E8%BC%83%E7%94%A82%3B&@_w:2%3B&=%2F_QWERTY%3B&@_f:5%3B&=Q&=W&=E&=R&=T&=Y&=U&=I&=O&=P&=~%0A%60%3B&@=A&=S&=D&=F&=G&=H&=J&=K&=L&=%2F:%0A%2F%3B&=%22%0A'%3B&@_y:0.5&f:3&w:2%3B&=%2F_LOWER%3B&@_f:5%3B&=!%0A1&=%2F@%0A2&=%23%0A3&=$%0A4&=%25%0A5&=%5E%0A6&=%2F&%0A7&=*%0A8&=(%0A9&=)%0A0&=%7C%0A%5C%3B&@=F1&=F2&=F3&=F4&=F5&=F6&=%2F_%0A-&=+%0A%2F=&=%7B%0A%5B&=%7D%0A%5D&=%22%0A'">Keyboard Layout Editor</a> で作成
</figcaption>
</figure>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-keymap.c data-lang=keymap.c><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a></span><span class=p>[</span><span class=n>_QWERTY</span><span class=p>]</span> <span class=o>=</span> <span class=n>LAYOUT</span><span class=p>(</span>
<span class=ln id=2><a style=outline:none;text-decoration:none;color:inherit href=#2>2</a></span>  <span class=n>KC_Q</span><span class=p>,</span>  <span class=n>KC_W</span><span class=p>,</span>  <span class=n>KC_E</span><span class=p>,</span>  <span class=n>KC_R</span><span class=p>,</span>  <span class=n>KC_T</span><span class=p>,</span>  <span class=n>KC_Y</span><span class=p>,</span>  <span class=n>KC_U</span><span class=p>,</span>    <span class=n>KC_I</span><span class=p>,</span>   <span class=n>KC_O</span><span class=p>,</span>    <span class=n>KC_P</span><span class=p>,</span>    <span class=n>JU_GRV</span><span class=p>,</span>  \
<span class=ln id=3><a style=outline:none;text-decoration:none;color:inherit href=#3>3</a></span>  <span class=n>KC_A</span><span class=p>,</span>  <span class=n>KC_S</span><span class=p>,</span>  <span class=n>KC_D</span><span class=p>,</span>  <span class=n>KC_F</span><span class=p>,</span>  <span class=n>KC_G</span><span class=p>,</span>  <span class=n>KC_H</span><span class=p>,</span>  <span class=n>KC_J</span><span class=p>,</span>    <span class=n>KC_K</span><span class=p>,</span>   <span class=n>KC_L</span><span class=p>,</span>    <span class=n>JU_SCLN</span><span class=p>,</span> <span class=n>JU_QUOT</span><span class=p>,</span> \
<span class=ln id=4><a style=outline:none;text-decoration:none;color:inherit href=#4>4</a></span><span class=p>),</span>
<span class=ln id=5><a style=outline:none;text-decoration:none;color:inherit href=#5>5</a></span><span class=p>[</span><span class=n>_LOWER</span><span class=p>]</span> <span class=o>=</span> <span class=n>LAYOUT</span><span class=p>(</span> \
<span class=ln id=6><a style=outline:none;text-decoration:none;color:inherit href=#6>6</a></span>  <span class=n>KC_1</span><span class=p>,</span>  <span class=n>JU_2</span><span class=p>,</span>  <span class=n>KC_3</span><span class=p>,</span>  <span class=n>KC_4</span><span class=p>,</span>  <span class=n>KC_5</span><span class=p>,</span>  <span class=n>JU_6</span><span class=p>,</span>  <span class=n>JU_7</span><span class=p>,</span>    <span class=n>JU_8</span><span class=p>,</span>   <span class=n>JU_9</span><span class=p>,</span>    <span class=n>JU_0</span><span class=p>,</span>    <span class=n>JU_BSLS</span><span class=p>,</span> \
<span class=ln id=7><a style=outline:none;text-decoration:none;color:inherit href=#7>7</a></span>  <span class=n>KC_F1</span><span class=p>,</span> <span class=n>KC_F2</span><span class=p>,</span> <span class=n>KC_F3</span><span class=p>,</span> <span class=n>KC_F4</span><span class=p>,</span> <span class=n>KC_F5</span><span class=p>,</span> <span class=n>KC_F6</span><span class=p>,</span> <span class=n>JU_MINS</span><span class=p>,</span> <span class=n>JU_EQL</span><span class=p>,</span> <span class=n>JU_LBRC</span><span class=p>,</span> <span class=n>JU_RBRC</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span>   \
<span class=ln id=8><a style=outline:none;text-decoration:none;color:inherit href=#8>8</a></span><span class=p>),</span>
</code></pre></div><p>なお、<code>JU_*</code> キーを使う場合、ライブラリとして読み込む方法とコードをコピペして使う方法の2つがあります。<a href=https://github.com/koktoh/jtu_custom_keycodes/tree/master/default target=_blank rel="noopener noreferrer">jtu_custom_keycodes/default/README.md<i class="fas fa-external-link-square-alt ms-1"></i></a> に手順が記載されていますので、そちらを確認して実装します。</p>
<h4 id=key-overrides-を使う方法 data-numberify>Key Overrides を使う方法<a class="anchor ms-1 d-none" href=#key-overrides-を使う方法>#</a></h4>
<p>Key Overrides の詳細は、QMK Firmware の公式ドキュメントの<a href=https://github.com/qmk/qmk_firmware/blob/daa6ba4a11e6e02ec141e57324907066457afd64/docs/ja/feature_key_overrides.md target=_blank rel="noopener noreferrer">暫定日本語訳<i class="fas fa-external-link-square-alt ms-1"></i></a> で確認できますが、この機能を簡単に説明すると、修飾キーとキーの組み合わせを上書きして別のキーを送信できるようにするというものです。PC に送信するキーコード自体を変更できますので、US と JIS の違いを吸収するのにうってつけの機能となります。</p>
<p>例えば、OS のキーボード配列が JIS だと <code>Shift + 2</code> は <code>"</code> と解釈されますが、Key Overrides を使うと <code>Shift + 2</code> を <code>JP_AT</code> に変換して PC に送信できますので、<code>Shift + 2</code> を押して <code>@</code> を表示させるということができるようになります。このように修飾キーとキーの組み合わせを上書きすることで、US キーキャップの印字通りの入力を実現できるようになります。</p>
<p>ここから具体的なコードを示しますが、まず、Key Overrides を使うには <code>rules.mk</code> に <code>KEY_OVERRIDE_ENABLE = yes</code> を追加する必要があります。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rules.mk data-lang=rules.mk><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a></span><span class=nv>KEY_OVERRIDE_ENABLE</span> <span class=o>=</span> yes
</code></pre></div><p>次に、<code>keymap.c</code> に Key Overrides の対象となるキーの組み合わせなどを定義した <code>key_override_t</code> 構造体を初期化します。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-keymap.c data-lang=keymap.c><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a></span><span class=c1>// `shift + &#39;` を上書きして `&#34;` を送信する
</span><span class=ln id=2><a style=outline:none;text-decoration:none;color:inherit href=#2>2</a></span><span class=c1></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>JP_QUOT_key_override</span> <span class=o>=</span>
<span class=ln id=3><a style=outline:none;text-decoration:none;color:inherit href=#3>3</a></span>  <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>JP_QUOT</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_2</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=4><a style=outline:none;text-decoration:none;color:inherit href=#4>4</a></span>
<span class=ln id=5><a style=outline:none;text-decoration:none;color:inherit href=#5>5</a></span><span class=c1>// `shift + 2` を上書きして `@` を送信する
</span><span class=ln id=6><a style=outline:none;text-decoration:none;color:inherit href=#6>6</a></span><span class=c1></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_2_key_override</span> <span class=o>=</span> 
<span class=ln id=7><a style=outline:none;text-decoration:none;color:inherit href=#7>7</a></span>  <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_2</span><span class=p>,</span> <span class=n>KC_LBRC</span><span class=p>,</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
</code></pre></div><p>初期化で使っている <code>ko_make_with_layers_and_negmods</code> 初期化子は、最もオプションが多い初期化子で、Key Overrides を使うレイヤーや押してはいけない修飾キーを指定できます。1つ目の設定に指定している引数の内容は次のとおりです。</p>
<dl>
<dt><code>MOD_MASK_SHIFT</code></dt>
<dd>Key Overrides を使うために押す必要がある修飾キーに Shift キーを指定しています。キーの指定は、<code>MOD_BIT(KC_RSFT)</code> のように <code>MOD_BIT()</code> を使うか、<a href="https://docs.qmk.fm/#/ja/feature_advanced_keycodes?id=checking-modifier-state" target=_blank rel="noopener noreferrer">モッドマスク<i class="fas fa-external-link-square-alt ms-1"></i></a>（<code>MOD_MASK_CTRL</code> 等）を使って行います。</dd>
<dt><code>JP_QUOT</code></dt>
<dd>Key Overrides を使うために押す必要があるキーに <code>'</code> を指定しています。なお、<code>KC_QUOT</code> ではなく <code>JP_QUOT</code> としているのは、キーマップで <code>KC_QUOT</code> の代わりに <code>JP_QUOT</code> を指定しているためです。</dd>
<dt><code>S(KC_2)</code></dt>
<dd><code>"</code> を送信するためのキーコードを指定しています。OS のキーボード配列が JIS の場合に <code>"</code> を送信するには <code>S(KC_2)</code> と指定する必要がありますが、<code>JP_DQUO</code> と指定しても OK です。ここは好みで決めます。</dd>
<dt><code>~0</code></dt>
<dd>全てのレイヤーで Key Overrides を使うという指定です。レイヤー i でこのオーバーライドを使うには、i 番目のビット <code>(1 &lt;&lt; i)</code> を設定します。</dd>
<dt><code>MOD_MASK_CAG</code></dt>
<dd>Key Overrides を使うときに<strong>押していてはいけない</strong>修飾キーに <code>control</code>、<code>windows</code>、<code>alt</code> キーを指定しています。なお、押していてはいけない修飾キーを指定する場合、<code>shift</code>、<code>control</code>、<code>windows</code>、<code>alt</code> の4種類の修飾キーを「押す必要がある」と「押していてはいけない」のどちらかに指定する必要があります。指定漏れや重複指定があると Key Overrides が無効化されます。</dd>
</dl>
<p>それから、<code>key_overrides</code> 配列の要素に <code>key_override_t</code> 構造体を指定します。<code>key_overrides</code> 配列は NULL で終了し、<code>key_override_t</code> 値へのポインタ (const key_override_t **) を含みます。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-keymap.c data-lang=keymap.c><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=o>**</span><span class=n>key_overrides</span> <span class=o>=</span> <span class=p>(</span><span class=k>const</span> <span class=n>key_override_t</span> <span class=o>*</span><span class=p>[]){</span>
<span class=ln id=2><a style=outline:none;text-decoration:none;color:inherit href=#2>2</a></span>    <span class=o>&amp;</span><span class=n>JP_QUOT_key_override</span><span class=p>,</span>
<span class=ln id=3><a style=outline:none;text-decoration:none;color:inherit href=#3>3</a></span>    <span class=o>&amp;</span><span class=n>KC_2_key_override</span><span class=p>,</span>
<span class=ln id=4><a style=outline:none;text-decoration:none;color:inherit href=#4>4</a></span>    <span class=nb>NULL</span> <span class=c1>// Null terminate the array of overrides!
</span><span class=ln id=5><a style=outline:none;text-decoration:none;color:inherit href=#5>5</a></span><span class=c1></span><span class=p>};</span>
</code></pre></div><p>あとは、これを必要なキーの数だけ繰り返していきます。私が行った設定をキーマップと合わせて以下に示します。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1> 1</a></span><span class=c1>// 全レイヤーで Key Overrides を有効化
</span><span class=ln id=2><a style=outline:none;text-decoration:none;color:inherit href=#2> 2</a></span><span class=c1>// Ctrl, Win, Altキーを押していたら Key Overrides を発動しない
</span><span class=ln id=3><a style=outline:none;text-decoration:none;color:inherit href=#3> 3</a></span><span class=c1></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>JP_GRV_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>JP_GRV</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_EQL</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=4><a style=outline:none;text-decoration:none;color:inherit href=#4> 4</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_SCLN_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_SCLN</span><span class=p>,</span> <span class=n>KC_QUOT</span><span class=p>,</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=5><a style=outline:none;text-decoration:none;color:inherit href=#5> 5</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>JP_QUOT_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>JP_QUOT</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_2</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=6><a style=outline:none;text-decoration:none;color:inherit href=#6> 6</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_2_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_2</span><span class=p>,</span> <span class=n>KC_LBRC</span><span class=p>,</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=7><a style=outline:none;text-decoration:none;color:inherit href=#7> 7</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_6_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_6</span><span class=p>,</span> <span class=n>KC_EQL</span><span class=p>,</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=8><a style=outline:none;text-decoration:none;color:inherit href=#8> 8</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_7_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_7</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_6</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=9><a style=outline:none;text-decoration:none;color:inherit href=#9> 9</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_8_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_8</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_QUOT</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=10><a style=outline:none;text-decoration:none;color:inherit href=#10>10</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_9_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_9</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_8</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=11><a style=outline:none;text-decoration:none;color:inherit href=#11>11</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_0_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_0</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_9</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=12><a style=outline:none;text-decoration:none;color:inherit href=#12>12</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>JP_BSLS_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>JP_BSLS</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_INT3</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=13><a style=outline:none;text-decoration:none;color:inherit href=#13>13</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>KC_MINS_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>KC_MINS</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_INT1</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=14><a style=outline:none;text-decoration:none;color:inherit href=#14>14</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>JP_EQL_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>JP_EQL</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_SCLN</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=15><a style=outline:none;text-decoration:none;color:inherit href=#15>15</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>JP_LBRC_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>JP_LBRC</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_RBRC</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=16><a style=outline:none;text-decoration:none;color:inherit href=#16>16</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=n>JP_RBRC_key_override</span> <span class=o>=</span> <span class=n>ko_make_with_layers_and_negmods</span><span class=p>(</span><span class=n>MOD_MASK_SHIFT</span><span class=p>,</span> <span class=n>JP_RBRC</span><span class=p>,</span> <span class=n>S</span><span class=p>(</span><span class=n>KC_NUHS</span><span class=p>),</span> <span class=o>~</span><span class=mi>0</span><span class=p>,</span> <span class=n>MOD_MASK_CAG</span><span class=p>);</span>
<span class=ln id=17><a style=outline:none;text-decoration:none;color:inherit href=#17>17</a></span>
<span class=ln id=18><a style=outline:none;text-decoration:none;color:inherit href=#18>18</a></span><span class=k>const</span> <span class=n>key_override_t</span> <span class=o>**</span><span class=n>key_overrides</span> <span class=o>=</span> <span class=p>(</span><span class=k>const</span> <span class=n>key_override_t</span> <span class=o>*</span><span class=p>[]){</span>
<span class=ln id=19><a style=outline:none;text-decoration:none;color:inherit href=#19>19</a></span>    <span class=o>&amp;</span><span class=n>JP_GRV_key_override</span><span class=p>,</span>
<span class=ln id=20><a style=outline:none;text-decoration:none;color:inherit href=#20>20</a></span>    <span class=o>&amp;</span><span class=n>KC_SCLN_key_override</span><span class=p>,</span>
<span class=ln id=21><a style=outline:none;text-decoration:none;color:inherit href=#21>21</a></span>    <span class=o>&amp;</span><span class=n>JP_QUOT_key_override</span><span class=p>,</span>
<span class=ln id=22><a style=outline:none;text-decoration:none;color:inherit href=#22>22</a></span>    <span class=o>&amp;</span><span class=n>KC_2_key_override</span><span class=p>,</span>
<span class=ln id=23><a style=outline:none;text-decoration:none;color:inherit href=#23>23</a></span>    <span class=o>&amp;</span><span class=n>KC_6_key_override</span><span class=p>,</span>
<span class=ln id=24><a style=outline:none;text-decoration:none;color:inherit href=#24>24</a></span>    <span class=o>&amp;</span><span class=n>KC_7_key_override</span><span class=p>,</span>
<span class=ln id=25><a style=outline:none;text-decoration:none;color:inherit href=#25>25</a></span>    <span class=o>&amp;</span><span class=n>KC_8_key_override</span><span class=p>,</span>
<span class=ln id=26><a style=outline:none;text-decoration:none;color:inherit href=#26>26</a></span>    <span class=o>&amp;</span><span class=n>KC_9_key_override</span><span class=p>,</span>
<span class=ln id=27><a style=outline:none;text-decoration:none;color:inherit href=#27>27</a></span>    <span class=o>&amp;</span><span class=n>KC_0_key_override</span><span class=p>,</span>
<span class=ln id=28><a style=outline:none;text-decoration:none;color:inherit href=#28>28</a></span>    <span class=o>&amp;</span><span class=n>JP_BSLS_key_override</span><span class=p>,</span>
<span class=ln id=29><a style=outline:none;text-decoration:none;color:inherit href=#29>29</a></span>    <span class=o>&amp;</span><span class=n>KC_MINS_key_override</span><span class=p>,</span>
<span class=ln id=30><a style=outline:none;text-decoration:none;color:inherit href=#30>30</a></span>    <span class=o>&amp;</span><span class=n>JP_EQL_key_override</span><span class=p>,</span>
<span class=ln id=31><a style=outline:none;text-decoration:none;color:inherit href=#31>31</a></span>    <span class=o>&amp;</span><span class=n>JP_LBRC_key_override</span><span class=p>,</span>
<span class=ln id=32><a style=outline:none;text-decoration:none;color:inherit href=#32>32</a></span>    <span class=o>&amp;</span><span class=n>JP_RBRC_key_override</span><span class=p>,</span>
<span class=ln id=33><a style=outline:none;text-decoration:none;color:inherit href=#33>33</a></span>    <span class=nb>NULL</span> <span class=c1>// Null terminate the array of overrides!
</span><span class=ln id=34><a style=outline:none;text-decoration:none;color:inherit href=#34>34</a></span><span class=c1></span><span class=p>};</span>
<span class=ln id=35><a style=outline:none;text-decoration:none;color:inherit href=#35>35</a></span><span class=c1>// key override setting end
</span><span class=ln id=36><a style=outline:none;text-decoration:none;color:inherit href=#36>36</a></span><span class=c1></span>
<span class=ln id=37><a style=outline:none;text-decoration:none;color:inherit href=#37>37</a></span><span class=cm>/* keymap */</span>
<span class=ln id=38><a style=outline:none;text-decoration:none;color:inherit href=#38>38</a></span><span class=k>const</span> <span class=kt>uint16_t</span> <span class=n>PROGMEM</span> <span class=n>keymaps</span><span class=p>[][</span><span class=n>MATRIX_ROWS</span><span class=p>][</span><span class=n>MATRIX_COLS</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span> \
<span class=ln id=39><a style=outline:none;text-decoration:none;color:inherit href=#39>39</a></span>  <span class=p>[</span><span class=n>_QWERTY</span><span class=p>]</span> <span class=o>=</span> <span class=n>LAYOUT</span><span class=p>(</span>
<span class=ln id=40><a style=outline:none;text-decoration:none;color:inherit href=#40>40</a></span>      <span class=n>KC_TAB</span><span class=p>,</span>   <span class=n>KC_Q</span><span class=p>,</span>   <span class=n>KC_W</span><span class=p>,</span>    <span class=n>KC_E</span><span class=p>,</span>    <span class=n>KC_R</span><span class=p>,</span>  <span class=n>KC_T</span><span class=p>,</span>         <span class=n>KC_Y</span><span class=p>,</span>    <span class=n>KC_U</span><span class=p>,</span>  <span class=n>KC_I</span><span class=p>,</span>    <span class=n>KC_O</span><span class=p>,</span>    <span class=n>KC_P</span><span class=p>,</span>    <span class=n>JP_GRV</span><span class=p>,</span>  \
<span class=ln id=41><a style=outline:none;text-decoration:none;color:inherit href=#41>41</a></span>      <span class=n>KC_LCTL</span><span class=p>,</span>  <span class=n>KC_A</span><span class=p>,</span>   <span class=n>KC_S</span><span class=p>,</span>    <span class=n>KC_D</span><span class=p>,</span>    <span class=n>KC_F</span><span class=p>,</span>  <span class=n>KC_G</span><span class=p>,</span>         <span class=n>KC_H</span><span class=p>,</span>    <span class=n>KC_J</span><span class=p>,</span>  <span class=n>KC_K</span><span class=p>,</span>    <span class=n>KC_L</span><span class=p>,</span>    <span class=n>KC_SCLN</span><span class=p>,</span> <span class=n>JP_QUOT</span><span class=p>,</span> \
<span class=ln id=42><a style=outline:none;text-decoration:none;color:inherit href=#42>42</a></span>      <span class=n>KC_LSFT</span><span class=p>,</span>  <span class=n>KC_Z</span><span class=p>,</span>   <span class=n>KC_X</span><span class=p>,</span>    <span class=n>KC_C</span><span class=p>,</span>    <span class=n>KC_V</span><span class=p>,</span>  <span class=n>KC_B</span><span class=p>,</span>         <span class=n>KC_N</span><span class=p>,</span>    <span class=n>KC_M</span><span class=p>,</span>  <span class=n>KC_COMM</span><span class=p>,</span> <span class=n>KC_DOT</span><span class=p>,</span>  <span class=n>KC_SLSH</span><span class=p>,</span> <span class=n>KC_ENT</span><span class=p>,</span>  \
<span class=ln id=43><a style=outline:none;text-decoration:none;color:inherit href=#43>43</a></span>      <span class=n>KC_LANG2</span><span class=p>,</span> <span class=n>KC_ESC</span><span class=p>,</span> <span class=n>KC_LALT</span><span class=p>,</span> <span class=n>KC_LGUI</span><span class=p>,</span> <span class=n>LOWER</span><span class=p>,</span> <span class=n>KC_SPC</span><span class=p>,</span>       <span class=n>KC_BSPC</span><span class=p>,</span> <span class=n>RAISE</span><span class=p>,</span> <span class=n>KC_RGUI</span><span class=p>,</span> <span class=n>KC_RALT</span><span class=p>,</span> <span class=n>KC_RCTL</span><span class=p>,</span> <span class=n>KC_LANG1</span> \
<span class=ln id=44><a style=outline:none;text-decoration:none;color:inherit href=#44>44</a></span>      <span class=p>),</span>
<span class=ln id=45><a style=outline:none;text-decoration:none;color:inherit href=#45>45</a></span>
<span class=ln id=46><a style=outline:none;text-decoration:none;color:inherit href=#46>46</a></span>  <span class=p>[</span><span class=n>_LOWER</span><span class=p>]</span> <span class=o>=</span> <span class=n>LAYOUT</span><span class=p>(</span> \
<span class=ln id=47><a style=outline:none;text-decoration:none;color:inherit href=#47>47</a></span>      <span class=n>JP_ZKHK</span><span class=p>,</span> <span class=n>KC_1</span><span class=p>,</span>    <span class=n>KC_2</span><span class=p>,</span>    <span class=n>KC_3</span><span class=p>,</span>    <span class=n>KC_4</span><span class=p>,</span>    <span class=n>KC_5</span><span class=p>,</span>       <span class=n>KC_6</span><span class=p>,</span>   <span class=n>KC_7</span><span class=p>,</span>    <span class=n>KC_8</span><span class=p>,</span>    <span class=n>KC_9</span><span class=p>,</span>    <span class=n>KC_0</span><span class=p>,</span>    <span class=n>JP_BSLS</span><span class=p>,</span> \
<span class=ln id=48><a style=outline:none;text-decoration:none;color:inherit href=#48>48</a></span>      <span class=n>_______</span><span class=p>,</span> <span class=n>KC_F1</span><span class=p>,</span>   <span class=n>KC_F2</span><span class=p>,</span>   <span class=n>KC_F3</span><span class=p>,</span>   <span class=n>KC_F4</span><span class=p>,</span>   <span class=n>KC_F5</span><span class=p>,</span>      <span class=n>KC_F6</span><span class=p>,</span>  <span class=n>KC_MINS</span><span class=p>,</span> <span class=n>JP_EQL</span><span class=p>,</span>  <span class=n>JP_LBRC</span><span class=p>,</span> <span class=n>JP_RBRC</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span>   \
<span class=ln id=49><a style=outline:none;text-decoration:none;color:inherit href=#49>49</a></span>      <span class=n>_______</span><span class=p>,</span> <span class=n>KC_F7</span><span class=p>,</span>   <span class=n>KC_F8</span><span class=p>,</span>   <span class=n>KC_F9</span><span class=p>,</span>   <span class=n>KC_F10</span><span class=p>,</span>  <span class=n>KC_F11</span><span class=p>,</span>     <span class=n>KC_F12</span><span class=p>,</span> <span class=n>KC_APP</span><span class=p>,</span>  <span class=n>JP_LPRN</span><span class=p>,</span> <span class=n>JP_RPRN</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> \
<span class=ln id=50><a style=outline:none;text-decoration:none;color:inherit href=#50>50</a></span>      <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span>    <span class=n>KC_DEL</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span> \
<span class=ln id=51><a style=outline:none;text-decoration:none;color:inherit href=#51>51</a></span>      <span class=p>),</span>
<span class=ln id=52><a style=outline:none;text-decoration:none;color:inherit href=#52>52</a></span>
<span class=ln id=53><a style=outline:none;text-decoration:none;color:inherit href=#53>53</a></span>  <span class=p>[</span><span class=n>_RAISE</span><span class=p>]</span> <span class=o>=</span> <span class=n>LAYOUT</span><span class=p>(</span> \
<span class=ln id=54><a style=outline:none;text-decoration:none;color:inherit href=#54>54</a></span>      <span class=n>KC_AGRV</span><span class=p>,</span> <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_PGUP</span><span class=p>,</span> <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>      <span class=n>KC_NO</span><span class=p>,</span>    <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_INS</span><span class=p>,</span>  <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_PSCR</span><span class=p>,</span> <span class=n>KC_NO</span><span class=p>,</span>   \
<span class=ln id=55><a style=outline:none;text-decoration:none;color:inherit href=#55>55</a></span>      <span class=n>_______</span><span class=p>,</span> <span class=n>KC_HOME</span><span class=p>,</span> <span class=n>KC_PGDN</span><span class=p>,</span> <span class=n>KC_END</span><span class=p>,</span>  <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>      <span class=n>KC_LEFT</span><span class=p>,</span>  <span class=n>KC_DOWN</span><span class=p>,</span> <span class=n>KC_UP</span><span class=p>,</span>   <span class=n>KC_RGHT</span><span class=p>,</span> <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   \
<span class=ln id=56><a style=outline:none;text-decoration:none;color:inherit href=#56>56</a></span>      <span class=n>_______</span><span class=p>,</span> <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>      <span class=n>KC_NO</span><span class=p>,</span>    <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> \
<span class=ln id=57><a style=outline:none;text-decoration:none;color:inherit href=#57>57</a></span>      <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>KC_ENT</span><span class=p>,</span>     <span class=n>_______</span><span class=p>,</span>  <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span> \
<span class=ln id=58><a style=outline:none;text-decoration:none;color:inherit href=#58>58</a></span>      <span class=p>),</span>
<span class=ln id=59><a style=outline:none;text-decoration:none;color:inherit href=#59>59</a></span>
<span class=ln id=60><a style=outline:none;text-decoration:none;color:inherit href=#60>60</a></span>    <span class=p>[</span><span class=n>_ADJUST</span><span class=p>]</span> <span class=o>=</span>  <span class=n>LAYOUT</span><span class=p>(</span> \
<span class=ln id=61><a style=outline:none;text-decoration:none;color:inherit href=#61>61</a></span>      <span class=n>RESET</span><span class=p>,</span>   <span class=n>JP_EXLM</span><span class=p>,</span> <span class=n>JP_AT</span><span class=p>,</span>   <span class=n>JP_HASH</span><span class=p>,</span> <span class=n>JP_DLR</span><span class=p>,</span>  <span class=n>JP_PERC</span><span class=p>,</span>    <span class=n>JP_CIRC</span><span class=p>,</span> <span class=n>JP_AMPR</span><span class=p>,</span>  <span class=n>JP_ASTR</span><span class=p>,</span> <span class=n>JP_LPRN</span><span class=p>,</span> <span class=n>JP_RPRN</span><span class=p>,</span>  <span class=n>KC_NO</span><span class=p>,</span> \
<span class=ln id=62><a style=outline:none;text-decoration:none;color:inherit href=#62>62</a></span>      <span class=n>DEBUG</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>      <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>    <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_CAD</span><span class=p>,</span>  <span class=n>KC_APSCR</span><span class=p>,</span> <span class=n>KC_NO</span><span class=p>,</span>\
<span class=ln id=63><a style=outline:none;text-decoration:none;color:inherit href=#63>63</a></span>      <span class=n>_______</span><span class=p>,</span> <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>      <span class=n>KC_NO</span><span class=p>,</span>   <span class=n>KC_NO</span><span class=p>,</span>    <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span>  <span class=n>_______</span><span class=p>,</span> \
<span class=ln id=64><a style=outline:none;text-decoration:none;color:inherit href=#64>64</a></span>      <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span>    <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span>  <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span> <span class=n>_______</span><span class=p>,</span>  <span class=n>_______</span> \
<span class=ln id=65><a style=outline:none;text-decoration:none;color:inherit href=#65>65</a></span>      <span class=p>)</span>
<span class=ln id=66><a style=outline:none;text-decoration:none;color:inherit href=#66>66</a></span><span class=p>};</span>
</code></pre></div><section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>S(JU_2) の形で指定したキーを押しても何も送信されませんので、<code>JP_EXLM</code> 等のキーコードを使う必要があります。&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>PC に送信されるキーコードは <a href=https://github.com/qmk/qmk_firmware/blob/master/quantum/keycode.h target=_blank rel="noopener noreferrer">qmk_firmware/keycode.h at master · qmk/qmk_firmware<i class="fas fa-external-link-square-alt ms-1"></i></a> で定義されています。このキーコードは <a href=https://www.usb.org/documents target=_blank rel="noopener noreferrer">USB 規格<i class="fas fa-external-link-square-alt ms-1"></i></a> の HID Usage Table で定められているコードを基にして、現在の OS では使われないコード (0xA5-0xDF) にメディアキー等が割り当てられています。&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div></div><div class=card-footer>
<div class="post-navs d-flex justify-content-evenly"><div class="post-nav post-prev">
<i class="fas fa-fw fa-chevron-down post-prev-icon me-1" data-fa-transform=rotate-90></i>
<a href=https://kankodori-blog.com/posts/2022-06-11/>html-include の使い方</a>
</div><div class="post-nav post-next">
<a href=https://kankodori-blog.com/posts/2022-08-20/>Mainsail から rotation_distance を確認・変更する方法</a>
<i class="fas fa-fw fa-chevron-down post-next-icon ms-1" data-fa-transform=rotate-270></i>
</div></div>
</div></article><div class="post-copyright mb-3 row card component" id=post-copyright>
<div class=card-header>
<h2 class="card-title fs-4 my-2 text-surface">Copyright</h2>
</div>
<div class=card-body><a class="d-flex align-items-center flex-column" target=_blank rel="license noopener noreferrer" href=https://creativecommons.org/licenses/by/4.0/deed.en>
<span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i></span>
CC BY 4.0
</a>
</div>
</div><section class="related-posts row card component">
<div class=card-header>
<h2 class="card-title fs-4 my-2 text-surface">関連する投稿</h2>
</div>
<div class=card-body>
<ul class="post-list list-unstyled"><li class="mb-3 border-bottom">
<a class=post-title href=https://kankodori-blog.com/posts/2022-06-11/>
html-include の使い方
</a>
<span class="post-meta post-date float-end">2022-06-11
</span>
<div class="post-summary my-3"><p>前置き# 自作キーボードのコミュニティで使用している質問用フォームを管理していますが、1つのページに全ての質問を載せる形から、問題の内容に応じて質問を分けるようにしました。
この改修により、管理するページ数が1から6に増え、そのうち5つのページでヘッダー等が共通していましたので、共通部分を切り出す方法を探したところ、html-includes - npm というプラグインがちょうど良かったため、早速使うことにしました。
このプラグインの解説をした日本語ページが見当たらなかったので、備忘録を兼ねて簡単な使い方を説明します。
プラグインの概要# あるHTMLファイルに別のHTMLファイルを挿入してくれるプラグインです。各ページに共通する...</p><div><a class="btn btn-sm btn-outline-primary btn-read-more" href=https://kankodori-blog.com/posts/2022-06-11/>もっと読む</a></div></div>
</li><li class="mb-3 border-bottom">
<a class=post-title href=https://kankodori-blog.com/posts/2022-04-19/>
sudo apt update で Fish のリポジトリキーが不正と表示される件について
</a>
<span class="post-meta post-date float-end">2022-04-19
</span>
<div class="post-summary my-3"><p>前置き# MainsailOS をインストールしている Raspberry Pi で sudo apt update を実行したら The following signatures were invalid: EXPKEYSIG 2CE2AC08D880C8E4 shells:fish OBS Project &lt;shells:fish@build.opensuse.org> と表示されるようになりました。
1> sudo apt update 2Get:1 https://pkgs.tailscale.com/stable/raspbian buster InRelease 3Hit:2...</p><div><a class="btn btn-sm btn-outline-primary btn-read-more" href=https://kankodori-blog.com/posts/2022-04-19/>もっと読む</a></div></div>
</li><li class="mb-3 border-bottom">
<a class=post-title href=https://kankodori-blog.com/posts/2022-04-04/>
Mainsail でサイドバーにロゴを表示させる方法
</a>
<span class="post-meta post-date float-end">2022-04-01
</span>
<div class="post-summary my-3"><p>前置き# 我が家では3台の3Dプリンタ（Prusa MK3S+、Ender 3 Pro、Voron V0.0）が稼動していて、これらを全て MainsailOS で制御しています。
しかし、操作画面を取り違えることがありましたので、どのプリンタの制御画面を開いているのか一目で分かる目印を表示させたいと思いました。調べてみると Mainsail にはテーマ機能が用意されていましたので、この機能を使ってプリンタ毎に目印が表示されるようにしました。
作業自体は簡単ですが、同じことをしている日本語記事が見当らないので、誰かの参考になればと思って記事にしました。
TL,DL# W300 x H900...</p><div><a class="btn btn-sm btn-outline-primary btn-read-more" href=https://kankodori-blog.com/posts/2022-04-04/>もっと読む</a></div></div>
</li></ul>
</div>
</section><div class="card component row post-comments" id=post-comments>
<div class=card-header>
<h2 class="card-title my-2 fs-4 text-surface">コメント</h2>
</div>
<div class=card-body><script src=https://utteranc.es/client.js repo=s-show/s-show.github.io issue-term=title label=comment theme=github-light crossorigin=anonymous async></script>
</div>
</div></div>
</div>
</div>
</main><footer class="footer mt-auto py-3 text-center container"><div class="offcanvas offcanvas-bottom h-auto" tabindex=-1 id=offcanvasActionsPanel aria-labelledby=offcanvasActionsPanelLabel>
<div class=offcanvas-header>
<h5 class="offcanvas-title fs-4" id=offcanvasActionsPanelLabel>
<i class="fas fa-fw fa-th-large me-1"></i>
Actions
</h5>
<button type=button class="btn-close ms-auto" data-bs-dismiss=offcanvas data-bs-target=offcanvasActionsPanel aria-label=Close></button>
</div>
<div class="offcanvas-body mt-2"><div class="social-share mb-4 d-flex overflow-auto">
<a class="btn-social-share d-flex flex-column align-items-center me-3" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=OS%20%e3%81%ae%e3%82%ad%e3%83%bc%e3%83%9c%e3%83%bc%e3%83%89%e9%85%8d%e5%88%97%e3%81%8c%20JIS%20%e3%82%ad%e3%83%bc%e3%83%9c%e3%83%bc%e3%83%89%e3%81%ae%e6%99%82%e3%81%ae%20QMK%20Firmware%20%e3%81%ae%e8%a8%ad%e5%ae%9a%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6&url=https%3a%2f%2fkankodori-blog.com%2fposts%2f2022-08-07%2f">
<i class="fab fa-2x fa-fw fa-twitter mb-2"></i> Twitter
</a>
<a class="btn-social-share d-flex flex-column align-items-center me-3" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fkankodori-blog.com%2fposts%2f2022-08-07%2f">
<i class="fab fa-2x fa-fw fa-facebook-f mb-2"></i> Facebook
</a>
</div>
<hr class=mb-4><div class="actions d-flex overflow-auto align-items-center">
<a role=button class="action action-go-back d-flex flex-column align-items-center me-3" href="javascript: window.history.back();">
<span class="action-icon mb-2"><i class="fas fa-2x fa-chevron-circle-down" data-fa-transform=rotate-90></i></span> 戻る
</a>
<a role=button class="action action-reload-page d-flex flex-column align-items-center me-3">
<span class="action-icon mb-2"><i class="fas fa-2x fa-redo-alt"></i></span> 再表示
</a>
<a role=button class="action action-copy-url d-flex flex-column align-items-center me-3">
<span class="action-icon mb-2"><i class="fas fa-2x fa-link"></i></span> URLをコピー
</a>
</div>
</div>
</div>
<nav class="social-links nav justify-content-center mb-2">
<a class="nav-link social-link" href=mailto:kankodori.blog@gmail.com title=Email>
<i class="fas fa-fw fa-2x fa-envelope"></i>
</a>
<a class="nav-link social-link" target=_blank href=https://github.com/s-show/s-show.github.io title=GitHub rel="noopener noreferrer">
<i class="fa-fw fa-2x fab fa-github"></i>
</a>
<a class="nav-link social-link" target=_blank href=https://www.reddit.com/user/s-show title=Reddit rel="noopener noreferrer">
<i class="fa-fw fa-2x fab fa-reddit"></i>
</a>
<a class="nav-link social-link" target=_blank href=https://twitter.com/s_show_0000 title=Twitter rel="noopener noreferrer">
<i class="fa-fw fa-2x fab fa-twitter"></i>
</a>
<a class="nav-link social-link" target=_blank href=https://kankodori-blog.com/index.xml title=RSS rel="noopener noreferrer">
<i class="fas fa-fw fa-2x fa-rss"></i>
</a>
</nav>
<div class="copyright mb-2">
Copyright © 2021-2023 s-show. All Rights Reserved.
</div>
<div class="powered-by mb-2">
Powered by <a class=text-primary href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a> and the <a class=text-primary href=https://github.com/razonyang/hugo-theme-bootstrap target=_blank rel="noopener noreferrer">HBS</a> theme.
</div></footer>
<script data-precache src=https://kankodori-blog.com/assets/main/bundle.min.d9138c59d3736746bbc5d2f02394cffd6d498fa2e3cf23d86e1dd41451aa0865.js integrity="sha256-2ROMWdNzZ0a7xdLwI5TP/W1Jj6LjzyPYbh3UFFGqCGU=" crossorigin=anonymous defer></script><script data-precache src=https://kankodori-blog.com/assets/icons/bundle.min.e463af86313483a41647b10fe3f6b7f5155673c4ee5feecfb9927075dbcc99f7.js integrity="sha256-5GOvhjE0g6QWR7EP4/a39RVWc8TuX+7PuZJwddvMmfc=" crossorigin=anonymous defer></script>
<script data-precache src=https://kankodori-blog.com/assets/viewer/bundle.min.656553c767bb7b8c29a3d0bf77142fe671344d24fe46bc9df13b218f0ebb2f6f.js integrity="sha256-ZWVTx2e7e4wpo9C/dxQv5nE0TST+Rryd8Tshjw67L28=" crossorigin=anonymous defer></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-367F1P4JXZ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-367F1P4JXZ',{anonymize_ip:!1})}</script>
</body>
</html>