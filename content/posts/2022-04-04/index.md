---
title: "Mainsail でサイドバーにロゴを表示させる方法"
date: 2022-04-01T00:15:04+09:00
draft: false
tags: [3Dプリンタ, 備忘録]
---

## 前置き

我が家では3台の3Dプリンタ（Prusa MK3S+、Ender 3 Pro、Voron V0.0）が稼動していて、これらを全て MainsailOS で制御しています。

しかし、操作画面を取り違えることがありましたので、どのプリンタの制御画面を開いているのか一目で分かる目印を表示させたいと思いました。調べてみると Mainsail にはテーマ機能が用意されていましたので、この機能を使ってプリンタ毎に目印が表示されるようにしました。

作業自体は簡単ですが、同じことをしている日本語記事が見当らないので、誰かの参考になればと思って記事にしました。

## TL,DL

W300 x H900 の画像を用意して `~/klipper_config/.theme/sidebar-background.png` というファイル名で保存すると、そのファイルがサイドバーのバックグラウンド画像となります。

## 具体的な手順

1. `~/klipper_config` ディレクトリに `.theme` というディレクトリを作成します
    1. ディレクトリの作成は、RaspberryPi に SSH でアクセスして `mkdir klipper/.theme` コマンドを実行するか、Mainsail の <svg xmlns="http://www.w3.org/2000/svg" width=16 height=16 transform="rotate(270)" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M507.6 122.8c-2.904-12.09-18.25-16.13-27.04-7.338l-76.55 76.56l-83.1-.0002l0-83.1l76.55-76.56c8.791-8.789 4.75-24.14-7.336-27.04c-23.69-5.693-49.34-6.111-75.92 .2484c-61.45 14.7-109.4 66.9-119.2 129.3C189.8 160.8 192.3 186.7 200.1 210.1l-178.1 178.1c-28.12 28.12-28.12 73.69 0 101.8C35.16 504.1 53.56 512 71.1 512s36.84-7.031 50.91-21.09l178.1-178.1c23.46 7.736 49.31 10.24 76.17 6.004c62.41-9.84 114.6-57.8 129.3-119.2C513.7 172.1 513.3 146.5 507.6 122.8zM80 456c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24s24 10.74 24 24C104 445.3 93.25 456 80 456z"/></svg> MACHINE タブの Config Files <svg xmlns="http://www.w3.org/2000/svg" width=16 height=16 viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"/></svg> の Create Directory <svg xmlns="http://www.w3.org/2000/svg" width=16 height=16 viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M464 96h-192l-64-64h-160C21.5 32 0 53.5 0 80v352C0 458.5 21.5 480 48 480h416c26.5 0 48-21.5 48-48v-288C512 117.5 490.5 96 464 96zM336 311.1h-56v56C279.1 381.3 269.3 392 256 392c-13.27 0-23.1-10.74-23.1-23.1V311.1H175.1C162.7 311.1 152 301.3 152 288c0-13.26 10.74-23.1 23.1-23.1h56V207.1C232 194.7 242.7 184 256 184s23.1 10.74 23.1 23.1V264h56C349.3 264 360 274.7 360 288S349.3 311.1 336 311.1z"/></svg> ボタンを使って行います。
2. 表示させるロゴを作成して `sidebar-background.png` というファイル名で保存します
    1. ロゴは W300 x H900 とし、上から 400 ぐらいの場所にロゴを置きます。
3. 作成したロゴを Mainsail をインストールしている RaspberryPi の `~/klipper_config/.theme/` ディレクトリにコピーします。
4. これで `sidebar-background.png` ファイルがサイドバーに表示されます

{{< bsimage src="image2.png" title="サイドバーにロゴが表示されています" >}}

## 補足

我が家の3Dプリンタは Prusa MK3S+、Ender 3 Pro、Voron V0.0 の3台なので、それぞれに合わせたロゴを用意する必要があります。

このうち Voronについては、Mainsail 公式が案内しているテーマを Kiauh でインストールし、Voron V0.0 のプリントヘッドに合わせて`klipper_config/.theme/sidebar_toolheads/sidebar-backgroundV0.0.png` を `klipper_config/.theme/sidebar-background.png` という名前でコピーすればOKです。

[eriroh/Mainsail-x-Voron-Toolhead-Theme](https://github.com/eriroh/Mainsail-x-Voron-Toolhead-Theme)

{{< bsimage src="image3.png" title="Voron の操作画面" >}}

Prusa MK3S+、Ender 3 Pro にはそうしたテーマが作成されていないようなので、ウェブでロゴに使えそうな画像を探してロゴを作成しました。Ender 3 Pro の操作画面は上の画像のとおりで、Prusa MK3S+ の操作画面は次のとおりです。

{{< bsimage src="image4.png" title="Prusa の操作画面" >}}

テーマに関する公式情報

[docs.mainsail.xyz/features/theming](https://docs.mainsail.xyz/features/theming)